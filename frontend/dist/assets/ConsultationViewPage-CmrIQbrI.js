import{O as I,r as h,p as N,n as H,o as E,q as D,j as i,B as n,C as W,T as r,t as B,P as F}from"./index-ik9JjyS6.js";import{u as M}from"./useNotification-DgBW3D1z.js";import{C as S}from"./Container-U9Ph7Onl.js";import{A as Z}from"./Alert-Dzq7_ew3.js";import{B as u}from"./Button-B6n5coYQ.js";import{A as T}from"./ArrowBack-CNB7SP5c.js";import{G as U}from"./GetApp-CjbL2B_C.js";import{E as $}from"./Edit-DimIYhJX.js";import{G as o}from"./Grid-OOY2WAvo.js";import{C as b}from"./Chip-pTV9ioJu.js";import"./useThemeProps-C_QfMg4i.js";const l=t=>{if(!t)return"";if(Array.isArray(t))return t.join(", ");if(typeof t=="string")try{const e=JSON.parse(t);return Array.isArray(e)?e.join(", "):t}catch{return t}return String(t)},K=t=>t?new Date(t).toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",G=t=>new Date(t).toLocaleString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),s=(t,e)=>{if(!e)return null;const y=typeof e=="boolean"?e?"TAK":"NIE":l(e);return i.jsxs(n,{sx:{mb:1,display:"flex",alignItems:"center",fontSize:"0.875rem"},children:[i.jsx(n,{component:"span",sx:{mr:1,fontSize:"0.75rem",color:"#333"},children:"■"}),i.jsxs(r,{component:"span",sx:{fontWeight:"bold",mr:1,minWidth:{xs:"100px",sm:"120px"},fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[t,":"]}),i.jsx(r,{component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:y})]})},a=(t,e)=>e?i.jsxs(n,{sx:{display:"flex",borderBottom:"1px dotted #ccc",pb:.5,mb:.5,fontSize:"0.875rem"},children:[i.jsxs(r,{component:"span",sx:{fontWeight:"bold",mr:1,minWidth:"120px"},children:[t,":"]}),i.jsx(r,{component:"span",sx:{flex:1},children:l(e)})]}):null;function ne(){const{id:t}=I(),[e,y]=h.useState(null),[C,j]=h.useState(!0),[w,g]=h.useState(null),[f,k]=h.useState(!1),z=N(),L=H(),R=E(L.breakpoints.down("sm")),{error:v,success:P}=M();h.useEffect(()=>{t?A():(g("Brak ID konsultacji"),j(!1))},[t]);const A=async()=>{var x,m;try{j(!0),g(null);const c=await D.get(`/consultations/${t}`);y(c.data.consultation||c.data)}catch(c){console.error("Błąd pobierania konsultacji:",c);const d=((m=(x=c.response)==null?void 0:x.data)==null?void 0:m.error)||"Błąd pobierania konsultacji";g(d),v(d)}finally{j(!1)}},O=async()=>{var x,m;try{k(!0);const c=await D.get(`/consultations/${t}/pdf`,{responseType:"blob"}),d=window.URL.createObjectURL(new Blob([c.data])),p=document.createElement("a");p.href=d,p.setAttribute("download",`konsultacja-${t}.pdf`),document.body.appendChild(p),p.click(),p.remove(),window.URL.revokeObjectURL(d),P("PDF pobrany pomyślnie")}catch(c){console.error("Błąd pobierania PDF:",c);const d=((m=(x=c.response)==null?void 0:x.data)==null?void 0:m.error)||"Błąd pobierania PDF";v(d)}finally{k(!1)}};return C?i.jsx(S,{maxWidth:"lg",children:i.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:8,gap:2},children:[i.jsx(W,{size:48}),i.jsx(r,{variant:"body1",color:"text.secondary",children:"Ładowanie konsultacji..."})]})}):w||!e?i.jsx(S,{maxWidth:"lg",children:i.jsxs(n,{sx:{py:4},children:[i.jsx(Z,{severity:"error",sx:{mb:2},children:w||"Konsultacja nie znaleziona"}),i.jsx(u,{onClick:()=>z(-1),startIcon:i.jsx(T,{}),children:"Powrót"})]})}):i.jsxs(S,{maxWidth:"lg",sx:{py:{xs:2,sm:3},px:{xs:1,sm:2,md:3}},children:[i.jsxs(n,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},gap:2,mb:4},children:[i.jsx(u,{startIcon:i.jsx(T,{}),onClick:()=>z(-1),sx:{color:"text.secondary",textTransform:"none",fontWeight:600,"&:hover":{bgcolor:B("#000",.04)}},children:"Powrót do pacjenta"}),i.jsxs(n,{sx:{display:"flex",gap:1.5,width:{xs:"100%",sm:"auto"}},children:[i.jsx(u,{fullWidth:R,variant:"outlined",startIcon:f?i.jsx(W,{size:20}):i.jsx(U,{}),onClick:O,disabled:f,sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:f?"Pobieranie...":"Pobierz PDF"}),i.jsx(u,{fullWidth:R,variant:"contained",startIcon:i.jsx($,{}),onClick:()=>z(`/consultations/${t}/edit`),sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:"Edytuj"})]})]}),i.jsxs(F,{sx:{p:{xs:2,sm:3,md:4},backgroundColor:"#fff",boxShadow:2},children:[i.jsxs(n,{sx:{textAlign:"center",borderBottom:"2px solid",borderColor:"primary.main",mb:4,pb:3},children:[i.jsx(r,{variant:"h4",sx:{fontWeight:800,textTransform:"uppercase",mb:1,letterSpacing:1,fontSize:{xs:"1.5rem",sm:"2.25rem"}},children:"Karta Konsultacyjna"}),i.jsx(r,{variant:"subtitle1",sx:{letterSpacing:4,textTransform:"uppercase",color:"primary.main",fontWeight:700,fontSize:{xs:"0.75rem",sm:"1rem"}},children:"Rich Diagnostic"}),i.jsxs(n,{sx:{mt:3,textAlign:"right",fontSize:"0.875rem",color:"text.secondary"},children:["Data: ",i.jsx("strong",{style:{color:"#000"},children:K(e.consultationDate)})]})]}),i.jsxs(n,{sx:{mb:3,p:2,backgroundColor:"#f9f9f9",borderRadius:1},children:[i.jsx(r,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Dane pacjenta"}),i.jsxs(o,{container:!0,spacing:2,children:[i.jsxs(o,{size:{xs:12,sm:6},children:[i.jsxs(r,{children:[i.jsx("strong",{children:"Imię i nazwisko:"})," ",e.patient.firstName," ",e.patient.lastName]}),e.patient.age&&i.jsxs(r,{children:[i.jsx("strong",{children:"Wiek:"})," ",e.patient.age," lat"]}),e.patient.gender&&i.jsxs(r,{children:[i.jsx("strong",{children:"Płeć:"})," ",e.patient.gender==="MALE"?"Mężczyzna":e.patient.gender==="FEMALE"?"Kobieta":"Inna"]})]}),i.jsxs(o,{size:{xs:12,sm:6},children:[e.patient.phone&&i.jsxs(r,{children:[i.jsx("strong",{children:"Telefon:"})," ",e.patient.phone]}),e.patient.email&&i.jsxs(r,{children:[i.jsx("strong",{children:"Email:"})," ",e.patient.email]}),i.jsxs(r,{children:[i.jsx("strong",{children:"Lekarz:"})," ",e.doctor.name]})]})]})]}),(e.hairLossSeverity||e.oilyHairSeverity||e.scalingSeverity||e.sensitivitySeverity)&&i.jsxs(i.Fragment,{children:[i.jsx(n,{sx:{backgroundColor:"#e0e0e0",fontWeight:"bold",fontSize:"1rem",p:1,mt:3,mb:2,borderLeft:"5px solid #333",textTransform:"uppercase"},children:"Problemy zgłaszane przez pacjenta"}),i.jsxs(o,{container:!0,spacing:2,sx:{mb:2},children:[(e.hairLossSeverity||e.hairLossLocalization)&&i.jsx(o,{size:{xs:12,sm:6},children:i.jsxs(n,{sx:{border:"1px solid #ccc",p:1.5,borderRadius:1,mb:2},children:[i.jsx(r,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,textDecoration:"underline"},children:"1. WYPADANIE WŁOSÓW"}),s("Nasilenie",e.hairLossSeverity),s("Lokalizacja",e.hairLossLocalization),s("Czas trwania",e.hairLossDuration),e.hairLossShampoos&&a("Szampony",e.hairLossShampoos)]})}),(e.oilyHairSeverity||e.oilyHairWashingFreq)&&i.jsx(o,{size:{xs:12,sm:6},children:i.jsxs(n,{sx:{border:"1px solid #ccc",p:1.5,borderRadius:1,mb:2},children:[i.jsx(r,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,textDecoration:"underline"},children:"2. PRZETŁUSZCZANIE WŁOSÓW"}),s("Nasilenie",e.oilyHairSeverity),s("Częstotliwość mycia",e.oilyHairWashingFreq),s("Czas trwania",e.oilyHairDuration),e.oilyHairShampoos&&a("Szampony",e.oilyHairShampoos),e.oilyHairNotes&&a("Uwagi",e.oilyHairNotes)]})}),(e.scalingSeverity||e.scalingType)&&i.jsx(o,{size:{xs:12,sm:6},children:i.jsxs(n,{sx:{border:"1px solid #ccc",p:1.5,borderRadius:1,mb:2},children:[i.jsx(r,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,textDecoration:"underline"},children:"3. ŁUSZCZENIE SKÓRY GŁOWY"}),s("Nasilenie",e.scalingSeverity),s("Typ",e.scalingType),s("Czas trwania",e.scalingDuration),e.scalingOther&&a("Inne",e.scalingOther)]})}),(e.sensitivitySeverity||e.sensitivityProblemType)&&i.jsx(o,{size:{xs:12,sm:6},children:i.jsxs(n,{sx:{border:"1px solid #ccc",p:1.5,borderRadius:1,mb:2},children:[i.jsx(r,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,textDecoration:"underline"},children:"4. WRAŻLIWOŚĆ / INNE"}),s("Problem",e.sensitivityProblemType),s("Nasilenie",e.sensitivitySeverity),s("Czas trwania",e.sensitivityDuration),e.sensitivityOther&&a("Inne",e.sensitivityOther),s("Stany zapalne",e.inflammatoryStates)]})})]})]}),(e.familyHistory||e.medications||e.stressLevel)&&i.jsxs(i.Fragment,{children:[i.jsx(n,{sx:{backgroundColor:"#e0e0e0",fontWeight:"bold",fontSize:"1rem",p:1,mt:3,mb:2,borderLeft:"5px solid #333",textTransform:"uppercase"},children:"Wywiad (Anamneza)"}),i.jsxs(o,{container:!0,spacing:2,sx:{mb:2,fontSize:"0.875rem"},children:[i.jsxs(o,{size:{xs:12,sm:6},children:[s("Rodzina",e.familyHistory),s("Dermatolog",e.dermatologyVisits),e.dermatologyVisitsReason&&a("Powód",e.dermatologyVisitsReason),s("Ciąża",e.pregnancy),s("Miesiączki",e.menstruationRegularity),e.contraception&&a("Hormony",e.contraception),s("Stres",e.stressLevel),s("Leki",e.medications),e.medicationsList&&a("Lista leków",e.medicationsList),e.supplements&&a("Suplementy",e.supplements)]}),i.jsxs(o,{size:{xs:12,sm:6},children:[s("Znieczulenie",e.anesthesia),s("Chemioterapia",e.chemotherapy),s("Radioterapia",e.radiotherapy),s("Szczepienia",e.vaccination),e.antibiotics&&a("Antybiotyki",e.antibiotics),s("Choroby",e.chronicDiseases),e.chronicDiseasesList&&a("Lista chorób",e.chronicDiseasesList),s("Specjaliści",e.specialists),e.specialistsList&&a("Jakiego",e.specialistsList),s("Zab. odżywiania",e.eatingDisorders),e.foodIntolerances&&a("Nietolerancje",e.foodIntolerances),s("Dieta",e.diet),s("Alergie",e.allergies),s("Metal w ciele",e.metalPartsInBody)]})]}),(e.careRoutineShampoo||e.careRoutineConditioner||e.careRoutineOils||e.careRoutineChemical)&&i.jsxs(n,{sx:{borderTop:"1px dashed #ccc",mt:2,pt:1,fontSize:"0.875rem",mb:2},children:[i.jsx(r,{component:"strong",children:"Aktualna pielęgnacja:"})," ",e.careRoutineShampoo&&`Szampon: ${e.careRoutineShampoo}, `,e.careRoutineConditioner&&`Odżywka: ${e.careRoutineConditioner}, `,e.careRoutineOils&&`Wcierki: ${e.careRoutineOils}, `,e.careRoutineChemical&&`Zabiegi: ${e.careRoutineChemical}`]})]}),(e.scalpType||e.hairQuality||e.seborrheaType)&&i.jsxs(i.Fragment,{children:[i.jsx(n,{sx:{backgroundColor:"#e0e0e0",fontWeight:"bold",fontSize:"1rem",p:1,mt:3,mb:2,borderLeft:"5px solid #333",textTransform:"uppercase"},children:"Trichoskopia - Badanie"}),i.jsxs(o,{container:!0,spacing:2,sx:{mb:2},children:[i.jsx(o,{size:{xs:12,sm:4},children:i.jsxs(n,{sx:{border:"1px solid #ccc",p:1.5,borderRadius:1},children:[i.jsx(r,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,textDecoration:"underline"},children:"SKÓRA GŁOWY"}),s("Typ",e.scalpType),s("Objawy",e.scalpAppearance),s("Wykwity",e.skinLesions),s("Potliwość",e.hyperhidrosis),s("Hiperkeratynizacja",e.hyperkeratinization),s("Wydzielina",e.sebaceousSecretion),s("Łojotok",e.seborrheaType),e.seborrheaTypeOther&&a("Inne",e.seborrheaTypeOther),s("Złuszczanie",e.dandruffType),s("pH",e.scalpPH)]})}),i.jsx(o,{size:{xs:12,sm:4},children:i.jsxs(n,{sx:{border:"1px solid #ccc",p:1.5,borderRadius:1},children:[i.jsx(r,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,textDecoration:"underline"},children:"STAN WŁOSÓW"}),s("Jakość",e.hairQuality),s("Uszkodzenia",e.hairDamage),s("Przyczyna",e.hairDamageReason),s("Kształt",e.hairShape),s("Typy",e.hairTypes),s("Odrastające",e.regrowingHairs),s("Vellus",e.vellusMiniaturizedHairs)]})}),i.jsx(o,{size:{xs:12,sm:4},children:i.jsxs(n,{sx:{border:"1px solid #ccc",p:1.5,borderRadius:1},children:[i.jsx(r,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,textDecoration:"underline"},children:"CECHY SPECYFICZNE"}),i.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[e.vascularPatterns&&i.jsx(b,{label:l(e.vascularPatterns),size:"small"}),e.perifollicularFeatures&&i.jsx(b,{label:l(e.perifollicularFeatures),size:"small"}),e.scalpDiseases&&i.jsx(b,{label:l(e.scalpDiseases),size:"small"}),e.otherDiagnostics&&i.jsx(b,{label:l(e.otherDiagnostics),size:"small"})]})]})})]})]}),i.jsxs(o,{container:!0,spacing:2,sx:{mt:2},children:[i.jsxs(o,{size:{xs:12,md:6},children:[i.jsx(n,{sx:{backgroundColor:"#e0e0e0",fontWeight:"bold",fontSize:"1rem",p:1,mb:2,borderLeft:"5px solid #333",textTransform:"uppercase"},children:"Rozpoznanie (Diagnoza)"}),i.jsxs(n,{sx:{mb:2},children:[i.jsx(r,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:e.diagnosis||"Brak wpisu"}),e.alopeciaTypes&&i.jsxs(r,{variant:"body2",children:["Typ: ",l(e.alopeciaTypes)]}),e.alopeciaType&&i.jsxs(r,{variant:"body2",children:["Klasyfikacja: ",e.alopeciaType]}),e.degreeOfThinning&&i.jsxs(r,{variant:"body2",children:["Przerzedzenie: ",e.degreeOfThinning]}),e.alopeciaAffectedAreas&&i.jsxs(r,{variant:"body2",children:["Obszary: ",l(e.alopeciaAffectedAreas)]}),e.miniaturization&&i.jsxs(r,{variant:"body2",children:["Miniaturyzacja: ",e.miniaturization]}),e.follicularUnits&&i.jsxs(r,{variant:"body2",children:["Jednostki: ",e.follicularUnits]}),e.pullTest&&i.jsxs(r,{variant:"body2",children:["Pull Test: ",e.pullTest]}),e.alopeciaOther&&i.jsxs(r,{variant:"body2",children:["Inne: ",e.alopeciaOther]}),e.norwoodHamiltonStage&&i.jsxs(r,{variant:"body2",sx:{mt:1},children:["Norwood-Hamilton: ",e.norwoodHamiltonStage,e.norwoodHamiltonNotes&&` (${e.norwoodHamiltonNotes})`]}),e.ludwigStage&&i.jsxs(r,{variant:"body2",children:["Ludwig: ",e.ludwigStage,e.ludwigNotes&&` (${e.ludwigNotes})`]})]})]}),i.jsx(o,{size:{xs:12,md:6},children:i.jsxs(n,{sx:{backgroundColor:"#f9f9f9",border:"1px solid #ddd",p:2,borderRadius:1},children:[i.jsx(n,{sx:{fontWeight:"bold",fontSize:"1rem",mb:2,textTransform:"uppercase"},children:"Zalecenia Domowe"}),i.jsxs(n,{sx:{fontSize:"0.875rem"},children:[e.careRecommendationsWashing&&i.jsxs(n,{sx:{mb:1},children:[i.jsx(r,{component:"strong",children:"Mycie:"})," ",e.careRecommendationsWashing]}),e.careRecommendationsTopical&&i.jsxs(n,{sx:{mb:1},children:[i.jsx(r,{component:"strong",children:"Wcierki:"})," ",e.careRecommendationsTopical]}),e.careRecommendationsSupplement&&i.jsxs(n,{sx:{mb:1},children:[i.jsx(r,{component:"strong",children:"Suplementy:"})," ",e.careRecommendationsSupplement]}),e.careRecommendationsBehavior&&i.jsxs(n,{sx:{mb:1},children:[i.jsx(r,{component:"strong",children:"Zachowanie:"})," ",e.careRecommendationsBehavior]}),e.visitsProcedures&&i.jsxs(n,{sx:{mb:1},children:[i.jsx(r,{component:"strong",children:"Gabinet:"})," ",e.visitsProcedures]})]})]})})]}),e.generalRemarks&&i.jsxs(n,{sx:{border:"1px solid #ccc",mt:3,p:2,backgroundColor:"#fffbe6",borderRadius:1},children:[i.jsx(r,{component:"strong",children:"Uwagi dodatkowe:"})," ",e.generalRemarks]}),i.jsx(n,{sx:{mt:4,pt:2,borderTop:"1px solid #ddd",fontSize:"0.75rem",textAlign:"right",color:"#666"},children:i.jsxs(r,{variant:"body2",children:["Dokument wygenerowany elektronicznie. Lekarz prowadzący: ",e.doctor.name," | Data wydruku: ",G(new Date)]})})]})]})}export{ne as default};
