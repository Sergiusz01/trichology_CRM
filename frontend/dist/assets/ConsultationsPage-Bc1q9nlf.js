import{r as n,p as I,n as B,o as A,q as D,j as e,B as a,T as o,E as g,C as E,P as f,t as i,A as u}from"./index-ik9JjyS6.js";import{B as b}from"./Button-B6n5coYQ.js";import{A as M}from"./Add-BfAxRG2-.js";import{P as K}from"./Person-BWLRddcv.js";import{G as y}from"./Grid-OOY2WAvo.js";import{C as L}from"./Card-CoKfBisl.js";import{C as $}from"./CardContent-IdCV6dAg.js";import{f as G,l as H}from"./index-B-6z-uVP.js";import{C}from"./Chip-pTV9ioJu.js";import{C as v}from"./ChevronRight-06I9BySK.js";import{T as Z,a as q,b as O,c as w,d as r,e as Q}from"./TableRow-D3npZos0.js";import{T as _}from"./TablePagination-CsvtqNHM.js";import"./useThemeProps-C_QfMg4i.js";import"./KeyboardArrowRight-BF2dHtf7.js";import"./Select--zggdXop.js";import"./MenuItem-cD7WzH5Q.js";function ce(){const[x,P]=n.useState([]),[z,h]=n.useState(!0),[c,m]=n.useState(0),[l,k]=n.useState(10),[T,N]=n.useState(0),d=I(),R=B(),W=A(R.breakpoints.down("md"));n.useEffect(()=>{S()},[]);const S=async()=>{try{h(!0);const t=(await D.get("/consultations",{params:{limit:500}})).data.consultations||[];N(t.length),P(t)}catch(s){console.error("Błąd pobierania konsultacji:",s)}finally{h(!1)}},p=s=>s?G(new Date(s),"dd MMM yyyy",{locale:H}):"—",j=x.slice(c*l,c*l+l);return e.jsxs(a,{sx:{p:{xs:1,sm:2}},children:[e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2,mb:4},children:[e.jsxs(a,{children:[e.jsxs(o,{variant:"h4",sx:{fontWeight:700,color:"text.primary",display:"flex",alignItems:"center",gap:1.5,fontSize:{xs:"1.5rem",sm:"1.75rem"}},children:[e.jsx(g,{fontSize:"large",sx:{color:"#1976d2"}}),"Konsultacje"]}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Lista wszystkich konsultacji. Kliknij, aby zobaczyć szczegóły."})]}),e.jsx(b,{variant:"contained",startIcon:e.jsx(M,{}),onClick:()=>d("/patients"),sx:{borderRadius:2,textTransform:"none",fontWeight:600,bgcolor:"#1976d2","&:hover":{bgcolor:"#1565c0"}},children:"Nowa konsultacja"})]}),z?e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:280},children:e.jsx(E,{})}):x.length===0?e.jsxs(f,{sx:{p:6,textAlign:"center",borderRadius:3,border:"1px solid",borderColor:"divider"},children:[e.jsx(g,{sx:{fontSize:56,color:"text.disabled",mb:2}}),e.jsx(o,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Brak konsultacji"}),e.jsx(o,{variant:"body2",color:"text.disabled",sx:{mb:3},children:"Konsultacje dodajesz z karty pacjenta."}),e.jsx(b,{variant:"outlined",startIcon:e.jsx(K,{}),onClick:()=>d("/patients"),sx:{borderRadius:2,textTransform:"none"},children:"Przejdź do pacjentów"})]}):W?e.jsx(y,{container:!0,spacing:2,children:j.map(s=>{var t;return e.jsx(y,{size:{xs:12},children:e.jsx(L,{onClick:()=>d(`/consultations/${s.id}`),sx:{borderRadius:3,border:"1px solid",borderColor:"divider",cursor:"pointer",transition:"all 0.2s","&:hover":{boxShadow:2,borderColor:"#1976d2",bgcolor:i("#1976d2",.02)}},children:e.jsx($,{sx:{py:2,"&:last-child":{pb:2}},children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(u,{sx:{bgcolor:i("#1976d2",.1),color:"#1976d2"},children:[s.patient.firstName[0],s.patient.lastName[0]]}),e.jsxs(a,{sx:{flex:1,minWidth:0},children:[e.jsxs(o,{variant:"body1",fontWeight:600,children:[s.patient.firstName," ",s.patient.lastName]}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:[p(s.consultationDate),(t=s.doctor)!=null&&t.name?` • ${s.doctor.name}`:""]})]}),s.isArchived&&e.jsx(C,{label:"Zarchiwizowana",size:"small",color:"default"}),e.jsx(v,{sx:{color:"text.secondary"}})]})})})},s.id)})}):e.jsxs(Z,{component:f,sx:{borderRadius:3,border:"1px solid",borderColor:"divider"},children:[e.jsxs(q,{children:[e.jsx(O,{children:e.jsxs(w,{sx:{bgcolor:i("#1976d2",.04)},children:[e.jsx(r,{sx:{fontWeight:600},children:"Pacjent"}),e.jsx(r,{sx:{fontWeight:600},children:"Data konsultacji"}),e.jsx(r,{sx:{fontWeight:600},children:"Lekarz"}),e.jsx(r,{align:"right",sx:{fontWeight:600}})]})}),e.jsx(Q,{children:j.map(s=>{var t;return e.jsxs(w,{onClick:()=>d(`/consultations/${s.id}`),sx:{cursor:"pointer","&:hover":{bgcolor:i("#1976d2",.04)}},children:[e.jsx(r,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsxs(u,{sx:{width:36,height:36,bgcolor:i("#1976d2",.1),color:"#1976d2",fontSize:"0.875rem"},children:[s.patient.firstName[0],s.patient.lastName[0]]}),e.jsxs(a,{children:[e.jsxs(o,{variant:"body2",fontWeight:600,children:[s.patient.firstName," ",s.patient.lastName]}),s.patient.email&&e.jsx(o,{variant:"caption",color:"text.secondary",children:s.patient.email})]})]})}),e.jsx(r,{children:p(s.consultationDate)}),e.jsx(r,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[((t=s.doctor)==null?void 0:t.name)??"—",s.isArchived&&e.jsx(C,{label:"Zarchiwizowana",size:"small"})]})}),e.jsx(r,{align:"right",children:e.jsx(v,{sx:{color:"text.secondary"}})})]},s.id)})})]}),e.jsx(_,{component:"div",count:T,page:c,onPageChange:(s,t)=>m(t),rowsPerPage:l,onRowsPerPageChange:s=>{k(parseInt(s.target.value,10)),m(0)},rowsPerPageOptions:[10,25,50],labelRowsPerPage:"Wierszy na stronę:"})]})]})}export{ce as default};
