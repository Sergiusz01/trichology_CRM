import{c as j,j as s,p as f,r as n,q as R,B as i,C as _,T as t,P as L,L as I,R as g,D as C,a0 as N,t as x,A as y,w as S,I as P}from"./index-DuGlS2hS.js";import{j as v}from"./dateFormat-D5f9IIy8.js";import{C as p}from"./Container-DggLIBHC.js";import{B as D}from"./Button-DYA-l7Ix.js";import{R as b}from"./Refresh-CYwZfv-e.js";import{A as w}from"./Alert-BnPrPNDn.js";import{L as O,A as U,P as k}from"./PersonAdd-Bmz4S436.js";import{E as h}from"./Edit-CC4dElt7.js";import{D as B}from"./Delete-XwNcIwF-.js";import{A as z,R as V}from"./Restore-CO_ljNLX.js";import{A as W}from"./Assignment-C5Fn19Y0.js";import{S as H}from"./Science-CQ1rCQXw.js";import{E as M}from"./EventNote-DQCOQi1j.js";import{C as F}from"./CalendarToday-0rSQMvcI.js";import"./useThemeProps-CESs6Os5.js";const G=j(s.jsx("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}));function q(r){switch(r){case"LOGIN":return s.jsx(G,{});case"CREATE_PATIENT":return s.jsx(k,{});case"CREATE_VISIT":return s.jsx(F,{});case"CREATE_CONSULTATION":return s.jsx(M,{});case"CREATE_LAB_RESULT":return s.jsx(H,{});case"CREATE_CARE_PLAN":return s.jsx(W,{});case"RESTORE_PATIENT":case"RESTORE_CONSULTATION":case"RESTORE_LAB_RESULT":case"RESTORE_CARE_PLAN":return s.jsx(V,{});case"UPDATE_PATIENT":case"UPDATE_VISIT":case"UPDATE_VISIT_STATUS":case"UPDATE_CONSULTATION":case"UPDATE_LAB_RESULT":case"UPDATE_CARE_PLAN":return s.jsx(h,{});case"ARCHIVE_PATIENT":case"ARCHIVE_CONSULTATION":case"ARCHIVE_LAB_RESULT":case"ARCHIVE_CARE_PLAN":return s.jsx(z,{});case"PERMANENT_DELETE_PATIENT":case"DELETE_VISIT":case"PERMANENT_DELETE_CONSULTATION":case"PERMANENT_DELETE_LAB_RESULT":case"PERMANENT_DELETE_CARE_PLAN":return s.jsx(B,{});default:return s.jsx(h,{})}}function X(r){return r==="LOGIN"?"#34C759":r.startsWith("CREATE_")||r.startsWith("RESTORE_")?"#1976d2":r.startsWith("UPDATE_")?"#FF9500":r.includes("DELETE")||r.startsWith("ARCHIVE_")?"#d32f2f":"#1976d2"}function ls(){const r=f(),[E,d]=n.useState([]),[m,A]=n.useState(!0),[T,c]=n.useState(null),l=n.useCallback(async()=>{var e,o;try{A(!0),c(null);const a=await R.get("/activity",{params:{limit:500}});d(a.data.activities||[])}catch(a){const u=((o=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:o.message)||(a==null?void 0:a.message)||"Nie udało się załadować aktywności";c(u),d([])}finally{A(!1)}},[]);return n.useEffect(()=>{l()},[l]),m?s.jsx(p,{maxWidth:"lg",sx:{py:4},children:s.jsx(i,{sx:{display:"flex",justifyContent:"center",py:6},children:s.jsx(_,{})})}):s.jsxs(p,{maxWidth:"lg",sx:{py:{xs:2,sm:3},px:{xs:1,sm:2,md:3}},children:[s.jsx(i,{sx:{mb:3},children:s.jsxs(i,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2},children:[s.jsxs(i,{children:[s.jsx(t,{variant:"h5",sx:{fontWeight:700},children:"Dziennik aktywności"}),s.jsx(t,{variant:"body2",color:"text.secondary",children:"Wszystkie zdarzenia w systemie: logowania, zmiany pacjentów, wizyt i inne"})]}),s.jsx(D,{startIcon:s.jsx(b,{}),onClick:l,variant:"outlined",disabled:m,children:"Odśwież"})]})}),T&&s.jsx(w,{severity:"error",sx:{mb:2},onClose:()=>c(null),children:T}),s.jsx(L,{sx:{p:{xs:2,sm:3},borderRadius:3,border:"1px solid",borderColor:"divider",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:E.length===0?s.jsx(t,{color:"text.secondary",sx:{py:4,textAlign:"center"},children:"Brak zapisanych aktywności."}):s.jsx(I,{sx:{p:0},children:E.map((e,o)=>s.jsxs(g.Fragment,{children:[o>0&&s.jsx(C,{sx:{my:1}}),s.jsxs(N,{sx:{px:2,py:2,borderRadius:2,transition:"all 0.2s","&:hover":{bgcolor:x("#667eea",.05),transform:"translateX(4px)"}},children:[s.jsx(O,{children:s.jsx(y,{sx:{width:48,height:48,bgcolor:X(e.type)},children:q(e.type)})}),s.jsx(S,{primary:s.jsx(t,{variant:"body1",sx:{fontWeight:600,mb:.5},children:e.title}),secondary:s.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[s.jsxs(t,{component:"span",variant:"body2",color:"text.primary",children:[e.userName," (",e.userEmail,")"]}),s.jsxs(t,{component:"span",variant:"caption",color:"text.secondary",children:["• ",v(e.date)]})]})}),e.link&&s.jsx(P,{edge:"end",onClick:()=>r(e.link),sx:{bgcolor:x("#667eea",.1),"&:hover":{bgcolor:x("#667eea",.2)}},children:s.jsx(U,{sx:{color:"#667eea"}})})]})]},e.id))})})]})}export{ls as default};
