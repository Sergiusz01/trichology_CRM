import{a as M,g as P,r as x,b as z,K as A,e as v,s as w,j as s,h as S,z as H,m as k,c as E,O as B,p as N,n as $,o as D,q as F,B as p,T as u,t as j,C as O,P as T,A as W}from"./index-ik9JjyS6.js";import{B as U}from"./Button-B6n5coYQ.js";import{A as V}from"./Add-BfAxRG2-.js";import{G as y}from"./Grid-OOY2WAvo.js";import{C as L}from"./Card-CoKfBisl.js";import{E as G}from"./Event-Dc0sKCy9.js";import"./useThemeProps-C_QfMg4i.js";function Z(e){return P("MuiCardActionArea",e)}const b=M("MuiCardActionArea",["root","focusVisible","focusHighlight"]),J=e=>{const{classes:o}=e;return S({root:["root"],focusHighlight:["focusHighlight"]},Z,o)},_=w(H,{name:"MuiCardActionArea",slot:"Root"})(k(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${b.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${b.focusVisible} .${b.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}}))),q=w("span",{name:"MuiCardActionArea",slot:"FocusHighlight"})(k(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}))),K=x.forwardRef(function(o,a){const i=z({props:o,name:"MuiCardActionArea"}),{children:l,className:g,focusVisibleClassName:r,slots:n={},slotProps:h={},...t}=i,d=i,c=J(d),m={slots:n,slotProps:h},[f,C]=A("root",{elementType:_,externalForwardedProps:{...m,...t},shouldForwardComponentProp:!0,ownerState:d,ref:a,className:v(c.root,g),additionalProps:{focusVisibleClassName:v(r,c.focusVisible)}}),[I,R]=A("focusHighlight",{elementType:q,externalForwardedProps:m,ownerState:d,className:c.focusHighlight});return s.jsxs(f,{...C,children:[l,s.jsx(I,{...R})]})});function Q(e){return P("MuiCardMedia",e)}M("MuiCardMedia",["root","media","img"]);const Y=e=>{const{classes:o,isMediaComponent:a,isImageComponent:i}=e;return S({root:["root",a&&"media",i&&"img"]},Q,o)},X=w("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e,{isMediaComponent:i,isImageComponent:l}=a;return[o.root,i&&o.media,l&&o.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),ss=["video","audio","picture","iframe","img"],es=["picture","img"],ts=x.forwardRef(function(o,a){const i=z({props:o,name:"MuiCardMedia"}),{children:l,className:g,component:r="div",image:n,src:h,style:t,...d}=i,c=ss.includes(r),m=!c&&n?{backgroundImage:`url("${n}")`,...t}:t,f={...i,component:r,isMediaComponent:c,isImageComponent:es.includes(r)},C=Y(f);return s.jsx(X,{className:v(C.root,g),as:r,role:!c&&n?"img":void 0,ref:a,style:m,ownerState:f,src:c?n||h:void 0,...d,children:l})}),os=E([s.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),s.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),as=E(s.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}));function ms(){const{id:e}=B(),o=N(),[a,i]=x.useState([]),[l,g]=x.useState(!0),r=$(),n=D(r.breakpoints.down("sm"));x.useEffect(()=>{e&&h()},[e]);const h=async()=>{try{g(!0);const t=await F.get(`/scalp-photos/patient/${e}`);i(t.data.scalpPhotos)}catch(t){console.error("Błąd pobierania zdjęć:",t)}finally{g(!1)}};return s.jsxs(p,{sx:{p:{xs:1,sm:2}},children:[s.jsxs(p,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:2,mb:4},children:[s.jsxs(p,{children:[s.jsxs(u,{variant:"h4",sx:{fontWeight:800,color:"primary.main",display:"flex",alignItems:"center",gap:1.5,fontSize:{xs:"1.75rem",sm:"2.125rem"}},children:[s.jsx(os,{fontSize:"large"}),"Zdjęcia skóry głowy"]}),s.jsx(u,{variant:"body2",color:"text.secondary",sx:{mt:.5,fontWeight:500},children:"Dokumentacja fotograficzna postępów kuracji"})]}),s.jsx(U,{variant:"contained",startIcon:s.jsx(V,{}),fullWidth:n,onClick:()=>o(`/patients/${e}/scalp-photos/new`),sx:{borderRadius:2.5,textTransform:"none",fontWeight:700,py:1.2,px:3,boxShadow:`0 4px 12px ${j(r.palette.primary.main,.2)}`},children:n?"DODAJ ZDJĘCIE":"Dodaj zdjęcie"})]}),l?s.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:s.jsx(O,{})}):s.jsx(y,{container:!0,spacing:3,children:a.length===0?s.jsx(y,{size:{xs:12},children:s.jsxs(T,{sx:{p:6,textAlign:"center",borderRadius:4,bgcolor:j(r.palette.primary.main,.02)},children:[s.jsx(as,{sx:{fontSize:60,color:"text.disabled",mb:2}}),s.jsx(u,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Brak zdjęć"}),s.jsx(u,{variant:"body2",color:"text.disabled",children:"Nie dodano jeszcze żadnej dokumentacji fotograficznej."})]})}):a.map(t=>{var d;return s.jsx(y,{size:{xs:12,sm:6,md:4},children:s.jsx(L,{sx:{borderRadius:4,overflow:"hidden",border:"1px solid",borderColor:"divider",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 30px rgba(0,0,0,0.12)","& .MuiCardMedia-root":{transform:"scale(1.05)"}}},children:s.jsxs(K,{onClick:()=>o(`/patients/${e}/scalp-photos/${t.id}`),children:[s.jsxs(p,{sx:{position:"relative",overflow:"hidden"},children:[s.jsx(ts,{component:"img",height:n?240:220,image:t.url||(t.filePath?`/uploads/${t.filePath.split(/[/\\]/).pop()}`:""),alt:t.originalFilename||"Zdjęcie skóry głowy",sx:{transition:"transform 0.5s ease",backgroundColor:"#f5f5f5",objectFit:"cover"},onError:c=>{const m=c.target;console.error("Błąd ładowania obrazu:",{src:m.src,photoUrl:t.url,filePath:t.filePath,photo:t}),m.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect fill="%23ddd" width="200" height="200"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="14" dy="10.5" font-weight="bold" x="50%25" y="50%25" text-anchor="middle"%3EBrak zdj%26%23381%3Bcia%3C/text%3E%3C/svg%3E'}}),s.jsxs(p,{sx:{position:"absolute",top:12,left:12,bgcolor:j("#000",.6),backdropFilter:"blur(4px)",color:"white",px:1.5,py:.5,borderRadius:1.5,display:"flex",alignItems:"center",gap:1},children:[s.jsx(G,{sx:{fontSize:14}}),s.jsx(u,{variant:"caption",sx:{fontWeight:700},children:new Date(t.date||t.createdAt).toLocaleDateString("pl-PL")})]})]}),s.jsxs(p,{sx:{p:2},children:[s.jsx(u,{variant:"subtitle2",sx:{fontWeight:700,mb:.5},noWrap:!0,children:t.description||"Bez opisu"}),s.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(W,{sx:{width:20,height:20,bgcolor:"primary.main",fontSize:10},children:((d=t.area)==null?void 0:d[0])||"G"}),s.jsx(u,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:t.area||"Obszar ogólny"})]})]})]})})},t.id)})})]})}export{ms as default};
