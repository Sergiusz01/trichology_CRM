import{a as co,g as uo,r as u,b as xo,e as he,j as e,s as ge,f as $o,h as ho,z as Mo,m as po,F as tt,G as Lo,H as No,d as Oo,n as rt,J as Qe,K as Se,M as nt,N as st,c as Zo,O as at,p as lt,Q as it,q as z,B as p,C as yo,S as wo,t as m,P as de,A as ct,T as b,y as Re,I as Y}from"./index-ik9JjyS6.js";import{u as dt}from"./useNotification-DgBW3D1z.js";import{E as So,P as ut,A as eo,R as oo,D as to}from"./ErrorRetry-C7ldxede.js";import{V as vo}from"./visitStatus-D0tn9_2F.js";import{C as ro}from"./Container-U9Ph7Onl.js";import{A as no}from"./Alert-Dzq7_ew3.js";import{A as zo}from"./Assignment-kAkaYihh.js";import{P as so}from"./PhotoCamera-DoXIfpUv.js";import{L as Co}from"./LocalHospital-juqa9401.js";import{E as ko}from"./EventAvailable-GyK5aXEc.js";import{B as g}from"./Button-B6n5coYQ.js";import{A as xt}from"./ArrowBack-CNB7SP5c.js";import{C as ao}from"./Chip-pTV9ioJu.js";import{C as Wo}from"./CalendarToday-DUEIO3Zn.js";import{G as J}from"./Grid-OOY2WAvo.js";import{A as ve}from"./Add-BfAxRG2-.js";import{E as Ye}from"./Edit-DimIYhJX.js";import{u as Ge,S as Po}from"./Select--zggdXop.js";import{K as ht,a as pt}from"./KeyboardArrowRight-BF2dHtf7.js";import{S as Q}from"./Stack-DcOE3fMJ.js";import{D as Be}from"./Delete-rK6RFrLt.js";import{V as Fo}from"./Visibility-DK8cQTuR.js";import{G as To}from"./GetApp-CjbL2B_C.js";import{T as bt,a as ft,b as mt,c as Ao,d as U,e as gt}from"./TableRow-D3npZos0.js";import{F as Ro,T as ue,I as jt}from"./TextField-BNTsiTHM.js";import{M as xe}from"./MenuItem-cD7WzH5Q.js";import{T as Bo,N as yt}from"./Notifications-BPynqar4.js";import{D as Ie,a as De,b as Ee,c as $e}from"./DialogTitle-DX1gnFsJ.js";import{I as wt}from"./InputAdornment-D5dmfE1O.js";import{D as lo}from"./DialogContentText-Dv-eACfQ.js";import{S as St}from"./Send-CFne59d_.js";import"./Refresh-F-fXWn1Z.js";import"./useThemeProps-C_QfMg4i.js";function vt(r){return uo("MuiTab",r)}const X=co("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),zt=r=>{const{classes:t,textColor:i,fullWidth:d,wrapped:x,icon:s,label:P,selected:C,disabled:w}=r,F={root:["root",s&&P&&"labelIcon",`textColor${$o(i)}`,d&&"fullWidth",x&&"wrapped",C&&"selected",w&&"disabled"],icon:["iconWrapper","icon"]};return ho(F,vt,t)},Ct=ge(Mo,{name:"MuiTab",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:i}=r;return[t.root,i.label&&i.icon&&t.labelIcon,t[`textColor${$o(i.textColor)}`],i.fullWidth&&t.fullWidth,i.wrapped&&t.wrapped,{[`& .${X.iconWrapper}`]:t.iconWrapper},{[`& .${X.icon}`]:t.icon}]}})(po(({theme:r})=>({...r.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:t})=>t.label&&(t.iconPosition==="top"||t.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:t})=>t.label&&t.iconPosition!=="top"&&t.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:t})=>t.icon&&t.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:t,iconPosition:i})=>t.icon&&t.label&&i==="top",style:{[`& > .${X.icon}`]:{marginBottom:6}}},{props:({ownerState:t,iconPosition:i})=>t.icon&&t.label&&i==="bottom",style:{[`& > .${X.icon}`]:{marginTop:6}}},{props:({ownerState:t,iconPosition:i})=>t.icon&&t.label&&i==="start",style:{[`& > .${X.icon}`]:{marginRight:r.spacing(1)}}},{props:({ownerState:t,iconPosition:i})=>t.icon&&t.label&&i==="end",style:{[`& > .${X.icon}`]:{marginLeft:r.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${X.selected}`]:{opacity:1},[`&.${X.disabled}`]:{opacity:(r.vars||r).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${X.selected}`]:{color:(r.vars||r).palette.primary.main},[`&.${X.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(r.vars||r).palette.text.secondary,[`&.${X.selected}`]:{color:(r.vars||r).palette.secondary.main},[`&.${X.disabled}`]:{color:(r.vars||r).palette.text.disabled}}},{props:({ownerState:t})=>t.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:t})=>t.wrapped,style:{fontSize:r.typography.pxToRem(12)}}]}))),ze=u.forwardRef(function(t,i){const d=xo({props:t,name:"MuiTab"}),{className:x,disabled:s=!1,disableFocusRipple:P=!1,fullWidth:C,icon:w,iconPosition:F="top",indicator:M,label:D,onChange:B,onClick:N,onFocus:oe,selected:O,selectionFollowsFocus:H,textColor:se="inherit",value:G,wrapped:pe=!1,..._}=d,h={...d,disabled:s,disableFocusRipple:P,selected:O,icon:!!w,iconPosition:F,label:!!D,fullWidth:C,textColor:se,wrapped:pe},A=zt(h),I=w&&D&&u.isValidElement(w)?u.cloneElement(w,{className:he(A.icon,w.props.className)}):w,ae=E=>{!O&&B&&B(E,G),N&&N(E)},k=E=>{H&&!O&&B&&B(E,G),oe&&oe(E)};return e.jsxs(Ct,{focusRipple:!P,className:he(A.root,x),ref:i,role:"tab","aria-selected":O,disabled:s,onClick:ae,onFocus:k,ownerState:h,tabIndex:O?0:-1,..._,children:[F==="top"||F==="start"?e.jsxs(u.Fragment,{children:[I,D]}):e.jsxs(u.Fragment,{children:[D,I]}),M]})});function kt(r){return(1+Math.sin(Math.PI*r-Math.PI/2))/2}function Wt(r,t,i,d={},x=()=>{}){const{ease:s=kt,duration:P=300}=d;let C=null;const w=t[r];let F=!1;const M=()=>{F=!0},D=B=>{if(F){x(new Error("Animation cancelled"));return}C===null&&(C=B);const N=Math.min(1,(B-C)/P);if(t[r]=s(N)*(i-w)+w,N>=1){requestAnimationFrame(()=>{x(null)});return}requestAnimationFrame(D)};return w===i?(x(new Error("Element already at target position")),M):(requestAnimationFrame(D),M)}const Pt={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Ft(r){const{onChange:t,...i}=r,d=u.useRef(),x=u.useRef(null),s=()=>{d.current=x.current.offsetHeight-x.current.clientHeight};return tt(()=>{const P=Lo(()=>{const w=d.current;s(),w!==d.current&&t(d.current)}),C=No(x.current);return C.addEventListener("resize",P),()=>{P.clear(),C.removeEventListener("resize",P)}},[t]),u.useEffect(()=>{s(),t(d.current)},[t]),e.jsx("div",{style:Pt,...i,ref:x})}function Tt(r){return uo("MuiTabScrollButton",r)}const At=co("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Rt=r=>{const{classes:t,orientation:i,disabled:d}=r;return ho({root:["root",i,d&&"disabled"]},Tt,t)},Bt=ge(Mo,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:i}=r;return[t.root,i.orientation&&t[i.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${At.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),It=u.forwardRef(function(t,i){const d=xo({props:t,name:"MuiTabScrollButton"}),{className:x,slots:s={},slotProps:P={},direction:C,orientation:w,disabled:F,...M}=d,D=Oo(),B={isRtl:D,...d},N=Rt(B),oe=s.StartScrollButtonIcon??ht,O=s.EndScrollButtonIcon??pt,H=Ge({elementType:oe,externalSlotProps:P.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:B}),se=Ge({elementType:O,externalSlotProps:P.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:B});return e.jsx(Bt,{component:"div",className:he(N.root,x),ref:i,role:null,ownerState:B,tabIndex:null,...M,style:{...M.style,...w==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${D?-90:90}deg)`}},children:C==="left"?e.jsx(oe,{...H}):e.jsx(O,{...se})})});function Dt(r){return uo("MuiTabs",r)}const io=co("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Io=(r,t)=>r===t?r.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r.firstChild,Do=(r,t)=>r===t?r.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r.lastChild,Xe=(r,t,i)=>{let d=!1,x=i(r,t);for(;x;){if(x===r.firstChild){if(d)return;d=!0}const s=x.disabled||x.getAttribute("aria-disabled")==="true";if(!x.hasAttribute("tabindex")||s)x=i(r,x);else{x.focus();return}}},Et=r=>{const{vertical:t,fixed:i,hideScrollbar:d,scrollableX:x,scrollableY:s,centered:P,scrollButtonsHideMobile:C,classes:w}=r;return ho({root:["root",t&&"vertical"],scroller:["scroller",i&&"fixed",d&&"hideScrollbar",x&&"scrollableX",s&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",P&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",C&&"scrollButtonsHideMobile"],scrollableX:[x&&"scrollableX"],hideScrollbar:[d&&"hideScrollbar"]},Dt,w)},$t=ge("div",{name:"MuiTabs",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:i}=r;return[{[`& .${io.scrollButtons}`]:t.scrollButtons},{[`& .${io.scrollButtons}`]:i.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,i.vertical&&t.vertical]}})(po(({theme:r})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.scrollButtonsHideMobile,style:{[`& .${io.scrollButtons}`]:{[r.breakpoints.down("sm")]:{display:"none"}}}}]}))),Mt=ge("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(r,t)=>{const{ownerState:i}=r;return[t.scroller,i.fixed&&t.fixed,i.hideScrollbar&&t.hideScrollbar,i.scrollableX&&t.scrollableX,i.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:r})=>r.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:r})=>r.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:r})=>r.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:r})=>r.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),Lt=ge("div",{name:"MuiTabs",slot:"List",overridesResolver:(r,t)=>{const{ownerState:i}=r;return[t.list,t.flexContainer,i.vertical&&t.flexContainerVertical,i.centered&&t.centered]}})({display:"flex",variants:[{props:({ownerState:r})=>r.vertical,style:{flexDirection:"column"}},{props:({ownerState:r})=>r.centered,style:{justifyContent:"center"}}]}),Nt=ge("span",{name:"MuiTabs",slot:"Indicator"})(po(({theme:r})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:r.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(r.vars||r).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(r.vars||r).palette.secondary.main}},{props:({ownerState:t})=>t.vertical,style:{height:"100%",width:2,right:0}}]}))),Ot=ge(Ft)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Eo={},Zt=u.forwardRef(function(t,i){const d=xo({props:t,name:"MuiTabs"}),x=rt(),s=Oo(),{"aria-label":P,"aria-labelledby":C,action:w,centered:F=!1,children:M,className:D,component:B="div",allowScrollButtonsMobile:N=!1,indicatorColor:oe="primary",onChange:O,orientation:H="horizontal",ScrollButtonComponent:se,scrollButtons:G="auto",selectionFollowsFocus:pe,slots:_={},slotProps:h={},TabIndicatorProps:A={},TabScrollButtonProps:I={},textColor:ae="primary",value:k,variant:E="standard",visibleScrollbar:le=!1,...Me}=d,T=E==="scrollable",$=H==="vertical",Z=$?"scrollTop":"scrollLeft",te=$?"top":"left",y=$?"bottom":"right",be=$?"clientHeight":"clientWidth",je=$?"height":"width",K={...d,component:B,allowScrollButtonsMobile:N,indicatorColor:oe,orientation:H,vertical:$,scrollButtons:G,textColor:ae,variant:E,visibleScrollbar:le,fixed:!T,hideScrollbar:T&&!le,scrollableX:T&&!$,scrollableY:T&&$,centered:F&&!T,scrollButtonsHideMobile:!N},re=Et(K),ke=Ge({elementType:_.StartScrollButtonIcon,externalSlotProps:h.startScrollButtonIcon,ownerState:K}),ye=Ge({elementType:_.EndScrollButtonIcon,externalSlotProps:h.endScrollButtonIcon,ownerState:K}),[we,L]=u.useState(!1),[V,Le]=u.useState(Eo),[We,Pe]=u.useState(!1),[Ne,Fe]=u.useState(!1),[Oe,_e]=u.useState(!1),[Ze,Te]=u.useState({overflow:"hidden",scrollbarWidth:0}),Ue=new Map,q=u.useRef(null),ne=u.useRef(null),ie={slots:_,slotProps:{indicator:A,scrollButtons:I,...h}},He=()=>{const a=q.current;let l;if(a){const j=a.getBoundingClientRect();l={clientWidth:a.clientWidth,scrollLeft:a.scrollLeft,scrollTop:a.scrollTop,scrollWidth:a.scrollWidth,top:j.top,bottom:j.bottom,left:j.left,right:j.right}}let f;if(a&&k!==!1){const j=ne.current.children;if(j.length>0){const W=j[Ue.get(k)];f=W?W.getBoundingClientRect():null}}return{tabsMeta:l,tabMeta:f}},fe=Qe(()=>{const{tabsMeta:a,tabMeta:l}=He();let f=0,j;$?(j="top",l&&a&&(f=l.top-a.top+a.scrollTop)):(j=s?"right":"left",l&&a&&(f=(s?-1:1)*(l[j]-a[j]+a.scrollLeft)));const W={[j]:f,[je]:l?l[je]:0};if(typeof V[j]!="number"||typeof V[je]!="number")Le(W);else{const ee=Math.abs(V[j]-W[j]),me=Math.abs(V[je]-W[je]);(ee>=1||me>=1)&&Le(W)}}),o=(a,{animation:l=!0}={})=>{l?Wt(Z,q.current,a,{duration:x.transitions.duration.standard}):q.current[Z]=a},n=a=>{let l=q.current[Z];$?l+=a:l+=a*(s?-1:1),o(l)},c=()=>{const a=q.current[be];let l=0;const f=Array.from(ne.current.children);for(let j=0;j<f.length;j+=1){const W=f[j];if(l+W[be]>a){j===0&&(l=a);break}l+=W[be]}return l},v=()=>{n(-1*c())},R=()=>{n(c())},[S,{onChange:ce,...Uo}]=Se("scrollbar",{className:he(re.scrollableX,re.hideScrollbar),elementType:Ot,shouldForwardComponentProp:!0,externalForwardedProps:ie,ownerState:K}),Ho=u.useCallback(a=>{ce==null||ce(a),Te({overflow:null,scrollbarWidth:a})},[ce]),[bo,fo]=Se("scrollButtons",{className:he(re.scrollButtons,I.className),elementType:It,externalForwardedProps:ie,ownerState:K,additionalProps:{orientation:H,slots:{StartScrollButtonIcon:_.startScrollButtonIcon||_.StartScrollButtonIcon,EndScrollButtonIcon:_.endScrollButtonIcon||_.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:ke,endScrollButtonIcon:ye}}}),Ko=()=>{const a={};a.scrollbarSizeListener=T?e.jsx(S,{...Uo,onChange:Ho}):null;const f=T&&(G==="auto"&&(We||Ne)||G===!0);return a.scrollButtonStart=f?e.jsx(bo,{direction:s?"right":"left",onClick:v,disabled:!We,...fo}):null,a.scrollButtonEnd=f?e.jsx(bo,{direction:s?"left":"right",onClick:R,disabled:!Ne,...fo}):null,a},mo=Qe(a=>{const{tabsMeta:l,tabMeta:f}=He();if(!(!f||!l)){if(f[te]<l[te]){const j=l[Z]+(f[te]-l[te]);o(j,{animation:a})}else if(f[y]>l[y]){const j=l[Z]+(f[y]-l[y]);o(j,{animation:a})}}}),Ke=Qe(()=>{T&&G!==!1&&_e(!Oe)});u.useEffect(()=>{const a=Lo(()=>{q.current&&fe()});let l;const f=ee=>{ee.forEach(me=>{me.removedNodes.forEach(Ae=>{l==null||l.unobserve(Ae)}),me.addedNodes.forEach(Ae=>{l==null||l.observe(Ae)})}),a(),Ke()},j=No(q.current);j.addEventListener("resize",a);let W;return typeof ResizeObserver<"u"&&(l=new ResizeObserver(a),Array.from(ne.current.children).forEach(ee=>{l.observe(ee)})),typeof MutationObserver<"u"&&(W=new MutationObserver(f),W.observe(ne.current,{childList:!0})),()=>{a.clear(),j.removeEventListener("resize",a),W==null||W.disconnect(),l==null||l.disconnect()}},[fe,Ke]),u.useEffect(()=>{const a=Array.from(ne.current.children),l=a.length;if(typeof IntersectionObserver<"u"&&l>0&&T&&G!==!1){const f=a[0],j=a[l-1],W={root:q.current,threshold:.99},ee=Je=>{Pe(!Je[0].isIntersecting)},me=new IntersectionObserver(ee,W);me.observe(f);const Ae=Je=>{Fe(!Je[0].isIntersecting)},jo=new IntersectionObserver(Ae,W);return jo.observe(j),()=>{me.disconnect(),jo.disconnect()}}},[T,G,Oe,M==null?void 0:M.length]),u.useEffect(()=>{L(!0)},[]),u.useEffect(()=>{fe()}),u.useEffect(()=>{mo(Eo!==V)},[mo,V]),u.useImperativeHandle(w,()=>({updateIndicator:fe,updateScrollButtons:Ke}),[fe,Ke]);const[Vo,Yo]=Se("indicator",{className:he(re.indicator,A.className),elementType:Nt,externalForwardedProps:ie,ownerState:K,additionalProps:{style:V}}),go=e.jsx(Vo,{...Yo});let Ve=0;const Xo=u.Children.map(M,a=>{if(!u.isValidElement(a))return null;const l=a.props.value===void 0?Ve:a.props.value;Ue.set(l,Ve);const f=l===k;return Ve+=1,u.cloneElement(a,{fullWidth:E==="fullWidth",indicator:f&&!we&&go,selected:f,selectionFollowsFocus:pe,onChange:O,textColor:ae,value:l,...Ve===1&&k===!1&&!a.props.tabIndex?{tabIndex:0}:{}})}),Go=a=>{if(a.altKey||a.shiftKey||a.ctrlKey||a.metaKey)return;const l=ne.current,f=nt(st(l));if((f==null?void 0:f.getAttribute("role"))!=="tab")return;let W=H==="horizontal"?"ArrowLeft":"ArrowUp",ee=H==="horizontal"?"ArrowRight":"ArrowDown";switch(H==="horizontal"&&s&&(W="ArrowRight",ee="ArrowLeft"),a.key){case W:a.preventDefault(),Xe(l,f,Do);break;case ee:a.preventDefault(),Xe(l,f,Io);break;case"Home":a.preventDefault(),Xe(l,null,Io);break;case"End":a.preventDefault(),Xe(l,null,Do);break}},qe=Ko(),[_o,qo]=Se("root",{ref:i,className:he(re.root,D),elementType:$t,externalForwardedProps:{...ie,...Me,component:B},ownerState:K}),[Jo,Qo]=Se("scroller",{ref:q,className:re.scroller,elementType:Mt,externalForwardedProps:ie,ownerState:K,additionalProps:{style:{overflow:Ze.overflow,[$?`margin${s?"Left":"Right"}`:"marginBottom"]:le?void 0:-Ze.scrollbarWidth}}}),[et,ot]=Se("list",{ref:ne,className:he(re.list,re.flexContainer),elementType:Lt,externalForwardedProps:ie,ownerState:K,getSlotProps:a=>({...a,onKeyDown:l=>{var f;Go(l),(f=a.onKeyDown)==null||f.call(a,l)}})});return e.jsxs(_o,{...qo,children:[qe.scrollButtonStart,qe.scrollbarSizeListener,e.jsxs(Jo,{...Qo,children:[e.jsx(et,{"aria-label":P,"aria-labelledby":C,"aria-orientation":H==="vertical"?"vertical":null,role:"tablist",...ot,children:Xo}),we&&go]}),qe.scrollButtonEnd]})}),Ut=Zo(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),Ht=Zo(e.jsx("path",{d:"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-6 0h-4V4h4z"})),Kt=r=>{const t=new Date(r),i=t.getUTCFullYear(),d=String(t.getUTCMonth()+1).padStart(2,"0"),x=String(t.getUTCDate()).padStart(2,"0"),s=String(t.getUTCHours()).padStart(2,"0"),P=String(t.getUTCMinutes()).padStart(2,"0");return`${i}-${d}-${x}T${s}:${P}`};function Ce(r){const{children:t,value:i,index:d,...x}=r;return e.jsx("div",{role:"tabpanel",hidden:i!==d,id:`patient-tabpanel-${d}`,"aria-labelledby":`patient-tab-${d}`,...x,children:i===d&&e.jsx(p,{sx:{pt:5,px:{xs:2,md:4}},children:t})})}function Cr(){const{id:r}=at(),t=lt(),i=it(),{success:d,error:x}=dt(),[s,P]=u.useState(null),[C,w]=u.useState(!0),[F,M]=u.useState(0),[D,B]=u.useState([]),[N,oe]=u.useState([]),[O,H]=u.useState([]),[se,G]=u.useState([]),[pe,_]=u.useState([]),[h,A]=u.useState({open:!1,mode:"add",id:null,data:"",rodzajZabiegu:"",notatki:"",status:"ZAPLANOWANA",numerWSerii:"",liczbaSerii:"",cena:""}),[I,ae]=u.useState({open:!1,type:null,id:null,name:""}),[k,E]=u.useState({open:!1,visitId:null,visitData:"",rodzajZabiegu:"",customMessage:"",recipientEmail:""}),[le,Me]=u.useState(!1),[T,$]=u.useState({open:!1,type:null,id:null,name:""}),[Z,te]=u.useState({open:!1,type:null,id:null,name:""}),[y,be]=u.useState({consultations:!1,labResults:!1,carePlans:!1}),[je,K]=u.useState(""),[re,ke]=u.useState(""),[ye,we]=u.useState(null);u.useEffect(()=>{r&&L()},[r,y]),u.useEffect(()=>{var o;(o=i.state)!=null&&o.refresh&&r&&(L(),t(i.pathname,{replace:!0,state:{}}))},[i.state,r]);const L=async()=>{var o,n;try{w(!0),we(null);const c=await z.get(`/patients/${r}`,{_skipErrorToast:!0});P(c.data.patient),H(c.data.patient.scalpPhotos||[]);const v=await z.get(`/consultations/patient/${r}`,{params:{archived:y.consultations?"true":"false"},_skipErrorToast:!0});B(v.data.consultations||[]);const R=await z.get(`/lab-results/patient/${r}`,{params:{archived:y.labResults?"true":"false"},_skipErrorToast:!0});oe(R.data.labResults||[]);const S=await z.get(`/care-plans/patient/${r}`,{params:{archived:y.carePlans?"true":"false"},_skipErrorToast:!0});G(S.data.carePlans||[]);const ce=await z.get(`/visits/patient/${r}`,{_skipErrorToast:!0});_(ce.data.visits||[])}catch(c){console.error("Błąd pobierania pacjenta:",c),we(((n=(o=c.response)==null?void 0:o.data)==null?void 0:n.error)||"Nie udało się załadować danych pacjenta")}finally{w(!1)}},V=(o,n,c)=>{ae({open:!0,type:o,id:n,name:c})},Le=async()=>{var o,n;if(!(!I.id||!I.type))try{switch(K(""),ke(""),I.type){case"patient":await z.delete(`/patients/${I.id}`),d("Pacjent został zarchiwizowany"),setTimeout(()=>t("/patients"),1500);break;case"consultation":await z.delete(`/consultations/${I.id}`),d("Konsultacja została zarchiwizowana"),L();break;case"labResult":await z.delete(`/lab-results/${I.id}`),d("Wynik badania został usunięty"),L();break;case"scalpPhoto":await z.delete(`/scalp-photos/${I.id}`),d("Zdjęcie zostało usunięte"),L();break;case"carePlan":await z.delete(`/care-plans/${I.id}`),d("Plan opieki został usunięty"),L();break;case"visit":await z.delete(`/visits/${I.id}`),d("Wizyta została usunięta"),L();break}ae({open:!1,type:null,id:null,name:""})}catch(c){x(((n=(o=c.response)==null?void 0:o.data)==null?void 0:n.error)||"Błąd podczas usuwania")}},We=()=>{ae({open:!1,type:null,id:null,name:""})},Pe=(o,n,c)=>{$({open:!0,type:o,id:n,name:c})},Ne=async()=>{var o,n;if(!(!T.id||!T.type))try{switch(K(""),ke(""),T.type){case"consultation":await z.post(`/consultations/${T.id}/restore`),d("Konsultacja została przywrócona");break;case"labResult":await z.post(`/lab-results/${T.id}/restore`),d("Wynik badania został przywrócony");break;case"carePlan":await z.post(`/care-plans/${T.id}/restore`),d("Plan opieki został przywrócony");break}$({open:!1,type:null,id:null,name:""}),L()}catch(c){x(((n=(o=c.response)==null?void 0:o.data)==null?void 0:n.error)||"Błąd podczas przywracania")}},Fe=(o,n,c)=>{te({open:!0,type:o,id:n,name:c})},Oe=async()=>{var o,n;if(!(!Z.id||!Z.type))try{switch(K(""),ke(""),Z.type){case"consultation":await z.delete(`/consultations/${Z.id}/permanent`),d("Konsultacja została trwale usunięta zgodnie z RODO");break;case"labResult":await z.delete(`/lab-results/${Z.id}/permanent`),d("Wynik badania został trwale usunięty zgodnie z RODO");break;case"carePlan":await z.delete(`/care-plans/${Z.id}/permanent`),d("Plan opieki został trwale usunięty zgodnie z RODO");break}te({open:!1,type:null,id:null,name:""}),L()}catch(c){x(((n=(o=c.response)==null?void 0:o.data)==null?void 0:n.error)||"Błąd podczas trwałego usuwania")}},_e=async()=>{var o,n;if(k.visitId){if(!k.recipientEmail){x("Podaj adres email odbiorcy");return}try{Me(!0),await z.post(`/visits/${k.visitId}/reminder`,{recipientEmail:k.recipientEmail,customMessage:k.customMessage||void 0}),d("Przypomnienie wysłane pomyślnie!"),E({open:!1,visitId:null,visitData:"",rodzajZabiegu:"",customMessage:"",recipientEmail:""})}catch(c){x(((n=(o=c.response)==null?void 0:o.data)==null?void 0:n.error)||"Błąd wysyłania przypomnienia")}finally{Me(!1)}}},Ze=o=>{E({open:!0,visitId:o.id,visitData:o.data,rodzajZabiegu:o.rodzajZabiegu,customMessage:"",recipientEmail:(s==null?void 0:s.email)||""})},Te=async(o,n,c)=>{var v,R;if(!(s!=null&&s.email)){x("Pacjent nie ma zapisanego adresu email");return}try{w(!0);let S="";switch(o){case"consultation":S=`/email/consultation/${n}`;break;case"labResult":S=`/email/lab-result/${n}`;break;case"scalpPhoto":S=`/email/scalp-photo/${n}`;break;case"carePlan":S=`/email/care-plan/${n}`;break}await z.post(S,{recipientEmail:s.email}),d(`${c} wysłane na email pacjenta`)}catch(S){x(((R=(v=S.response)==null?void 0:v.data)==null?void 0:R.error)||"Błąd wysyłania emaila")}finally{w(!1)}},Ue=()=>{const o=new Date,n=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),v=String(o.getDate()).padStart(2,"0"),R=String(o.getHours()).padStart(2,"0"),S=String(o.getMinutes()).padStart(2,"0"),ce=`${n}-${c}-${v}T${R}:${S}`;A({open:!0,mode:"add",id:null,data:ce,rodzajZabiegu:"",notatki:"",status:"ZAPLANOWANA",numerWSerii:"",liczbaSerii:"",cena:""})},q=o=>{var n,c,v;A({open:!0,mode:"edit",id:o.id,data:Kt(o.data),rodzajZabiegu:o.rodzajZabiegu,notatki:o.notatki||"",status:o.status,numerWSerii:((n=o.numerWSerii)==null?void 0:n.toString())||"",liczbaSerii:((c=o.liczbaSerii)==null?void 0:c.toString())||"",cena:((v=o.cena)==null?void 0:v.toString())||""})},ne=async()=>{var o,n;if(!h.data||!h.rodzajZabiegu){x("Wypełnij wymagane pola: Data i Rodzaj zabiegu");return}try{const c={patientId:r,data:h.data,rodzajZabiegu:h.rodzajZabiegu,notatki:h.notatki||null,status:h.status,numerWSerii:h.numerWSerii?parseInt(h.numerWSerii):null,liczbaSerii:h.liczbaSerii?parseInt(h.liczbaSerii):null,cena:h.cena?parseFloat(h.cena):null};h.mode==="edit"&&h.id?(await z.put(`/visits/${h.id}`,c),d("Wizyta została zaktualizowana")):(await z.post("/visits",c),d("Wizyta została dodana")),A({open:!1,mode:"add",id:null,data:"",rodzajZabiegu:"",notatki:"",status:"ZAPLANOWANA",numerWSerii:"",liczbaSerii:"",cena:""}),L()}catch(c){x(((n=(o=c.response)==null?void 0:o.data)==null?void 0:n.error)||"Błąd podczas zapisywania wizyty")}},ie=async(o,n)=>{var c,v;try{await z.patch(`/visits/${o}/status`,{status:n}),d("Status wizyty został zmieniony"),L()}catch(R){x(((v=(c=R.response)==null?void 0:c.data)==null?void 0:v.error)||"Błąd zmiany statusu")}},He=(o,n)=>`${o.charAt(0)}${n.charAt(0)}`.toUpperCase();if(C)return e.jsx(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(yo,{size:48,thickness:3,sx:{color:"#1d1d1f"}})});if(!s&&!C&&ye)return e.jsx(ro,{maxWidth:"lg",sx:{pt:3},children:e.jsx(So,{message:ye,onRetry:L})});if(!s&&!C)return e.jsx(ro,{maxWidth:"lg",children:e.jsx(no,{severity:"error",children:"Pacjent nie znaleziony"})});const fe=[{label:"Konsultacje",value:D.length,icon:zo,color:"#007AFF"},{label:"Wyniki badań",value:N.length,icon:wo,color:"#34C759"},{label:"Zdjęcia",value:O.length,icon:so,color:"#FF9500"},{label:"Plany opieki",value:se.length,icon:Co,color:"#FF3B30"},{label:"Wizyty",value:pe.length,icon:ko,color:"#AF52DE"}];return e.jsxs(p,{sx:{bgcolor:"#f5f5f7",minHeight:"100vh",pb:6},children:[e.jsxs(ro,{maxWidth:"lg",sx:{pt:3},children:[e.jsx(g,{startIcon:e.jsx(xt,{}),onClick:()=>t("/patients"),sx:{mb:3,color:"#1d1d1f","&:hover":{bgcolor:m("#000",.05)}},children:"Powrót do listy pacjentów"}),ye&&e.jsx(So,{message:ye,onRetry:L,onClose:()=>we(null)}),e.jsxs(de,{elevation:0,sx:{p:4,mb:3,borderRadius:3,bgcolor:"white",border:"1px solid",borderColor:"divider"},children:[e.jsxs(p,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"center",md:"flex-start"},gap:{xs:2.5,md:4},mb:4,textAlign:{xs:"center",md:"left"}},children:[e.jsx(ct,{sx:{bgcolor:m("#007AFF",.1),color:"#007AFF",width:{xs:80,md:100},height:{xs:80,md:100},fontSize:{xs:"1.75rem",md:"2.5rem"},fontWeight:700,border:"2px solid",borderColor:m("#007AFF",.2)},children:He(s.firstName,s.lastName)}),e.jsxs(p,{sx:{flex:1,width:"100%"},children:[e.jsxs(b,{variant:"h3",sx:{fontWeight:800,color:"#1d1d1f",mb:2,fontSize:{xs:"1.75rem",md:"2.75rem"},lineHeight:1.2},children:[s.firstName," ",s.lastName]}),e.jsxs(p,{sx:{display:"flex",gap:1.5,flexWrap:"wrap",justifyContent:{xs:"center",md:"flex-start"},alignItems:"center"},children:[s.age&&e.jsx(ao,{icon:e.jsx(Wo,{sx:{fontSize:"14px !important"}}),label:`${s.age} lat`,size:"small",sx:{bgcolor:m("#007AFF",.08),color:"#007AFF",border:"none",fontWeight:600,px:.5}}),s.gender&&e.jsx(ao,{label:s.gender==="MALE"?"Mężczyzna":s.gender==="FEMALE"?"Kobieta":"Inna",size:"small",sx:{bgcolor:s.gender==="MALE"?m("#007AFF",.08):m("#FF2D55",.08),color:s.gender==="MALE"?"#007AFF":"#FF2D55",border:"none",fontWeight:600,px:.5}})]})]})]}),e.jsxs(J,{container:!0,spacing:2,children:[e.jsx(J,{size:{xs:12,sm:4},children:e.jsx(g,{fullWidth:!0,variant:"contained",startIcon:e.jsx(ve,{}),onClick:()=>t(`/patients/${r}/consultations/new`),sx:{bgcolor:"#007AFF",color:"white",textTransform:"none",fontWeight:700,py:{xs:1.2,sm:1.5},borderRadius:2.5,boxShadow:`0 4px 14px ${m("#007AFF",.4)}`,"&:hover":{bgcolor:"#0051D5",boxShadow:`0 6px 20px ${m("#007AFF",.5)}`}},children:"Nowa konsultacja"})}),e.jsx(J,{size:{xs:12,sm:4},children:e.jsx(g,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Ye,{}),onClick:()=>t(`/patients/${r}/edit`),sx:{borderColor:m("#1d1d1f",.15),color:"#1d1d1f",textTransform:"none",fontWeight:600,py:{xs:1.2,sm:1.5},borderRadius:2.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"Edytuj dane"})}),s.email&&e.jsx(J,{size:{xs:12,sm:4},children:e.jsx(g,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Re,{}),onClick:()=>t(`/patients/${r}/email`),sx:{borderColor:m("#1d1d1f",.15),color:"#1d1d1f",textTransform:"none",fontWeight:600,py:{xs:1.2,sm:1.5},borderRadius:2.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"Email"})})]})]}),e.jsx(J,{container:!0,spacing:3,sx:{mb:4},children:fe.map((o,n)=>{const c=F===n+1;return e.jsx(J,{size:{xs:6,md:3},children:e.jsxs(de,{elevation:0,onClick:()=>M(n+1),sx:{p:{xs:2,sm:3},borderRadius:4,bgcolor:"white",border:"1px solid",borderColor:c?o.color:"divider",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:c?`0 8px 24px ${m(o.color,.15)}`:"none",position:"relative",overflow:"hidden","&:hover":{borderColor:o.color,transform:"translateY(-4px)",boxShadow:`0 12px 30px ${m(o.color,.12)}`},"&::before":c?{content:'""',position:"absolute",top:0,left:0,width:4,height:"100%",bgcolor:o.color}:{}},children:[e.jsx(p,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:e.jsx(p,{sx:{width:44,height:44,borderRadius:2.5,bgcolor:m(o.color,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(o.icon,{sx:{color:o.color,fontSize:24}})})}),e.jsx(b,{variant:"h3",sx:{fontWeight:800,color:"#1d1d1f",mb:.5,fontSize:{xs:"1.75rem",md:"2.25rem"}},children:o.value}),e.jsx(b,{variant:"body2",sx:{color:"#86868b",fontSize:"0.875rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.02em"},children:o.label})]})},n)})}),e.jsxs(de,{elevation:0,sx:{borderRadius:3,bgcolor:"white",border:"1px solid",borderColor:"divider",overflow:"hidden"},children:[e.jsxs(Zt,{value:F,onChange:(o,n)=>M(n),variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{borderBottom:"1px solid",borderColor:"divider",px:{xs:1,sm:2},"& .MuiTab-root":{textTransform:"none",fontWeight:700,fontSize:{xs:"0.9rem",sm:"1rem"},color:"#86868b",minHeight:{xs:56,sm:64},minWidth:{xs:100,sm:120},"&.Mui-selected":{color:"#007AFF"}},"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0",bgcolor:"#007AFF"}},children:[e.jsx(ze,{label:"Przegląd"}),e.jsx(ze,{label:"Konsultacje"}),e.jsx(ze,{label:"Wyniki"}),e.jsx(ze,{label:"Zdjęcia"}),e.jsx(ze,{label:"Plany"}),e.jsx(ze,{label:"Wizyty"})]}),e.jsx(Ce,{value:F,index:0,children:e.jsxs(J,{container:!0,spacing:3,children:[e.jsx(J,{size:{xs:12,md:6},children:e.jsxs(p,{sx:{mb:3},children:[e.jsx(b,{variant:"h6",sx:{fontWeight:700,color:"#1d1d1f",mb:3},children:"Informacje kontaktowe"}),e.jsxs(Q,{spacing:4,children:[s.phone&&e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(p,{sx:{width:48,height:48,borderRadius:2,bgcolor:m("#007AFF",.1),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(ut,{sx:{color:"#007AFF",fontSize:24}})}),e.jsxs(p,{children:[e.jsx(b,{variant:"caption",sx:{color:"#86868b",fontWeight:500,fontSize:"0.8rem",mb:.5,display:"block"},children:"Telefon"}),e.jsx(b,{variant:"body1",sx:{fontWeight:600,color:"#1d1d1f",fontSize:"1.1rem"},children:s.phone})]})]}),s.email&&e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(p,{sx:{width:48,height:48,borderRadius:2,bgcolor:m("#34C759",.1),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Re,{sx:{color:"#34C759",fontSize:24}})}),e.jsxs(p,{sx:{minWidth:0,flex:1},children:[e.jsx(b,{variant:"caption",sx:{color:"#86868b",fontWeight:500,fontSize:"0.8rem",mb:.5,display:"block"},children:"Email"}),e.jsx(b,{variant:"body1",sx:{fontWeight:600,color:"#1d1d1f",fontSize:"1.1rem",wordBreak:"break-word"},children:s.email})]})]}),s.address&&e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(p,{sx:{width:48,height:48,borderRadius:2,bgcolor:m("#FF9500",.1),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ut,{sx:{color:"#FF9500",fontSize:24}})}),e.jsxs(p,{sx:{minWidth:0,flex:1},children:[e.jsx(b,{variant:"caption",sx:{color:"#86868b",fontWeight:500,fontSize:"0.8rem",mb:.5,display:"block"},children:"Adres"}),e.jsx(b,{variant:"body1",sx:{fontWeight:600,color:"#1d1d1f",fontSize:"1.1rem",wordBreak:"break-word"},children:s.address})]})]})]})]})}),e.jsx(J,{size:{xs:12,md:6},children:e.jsxs(p,{sx:{mb:3},children:[e.jsx(b,{variant:"h6",sx:{fontWeight:700,color:"#1d1d1f",mb:3},children:"Dodatkowe informacje"}),e.jsx(Q,{spacing:4,children:s.occupation&&e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(p,{sx:{width:48,height:48,borderRadius:2,bgcolor:m("#FF3B30",.1),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Ht,{sx:{color:"#FF3B30",fontSize:24}})}),e.jsxs(p,{children:[e.jsx(b,{variant:"caption",sx:{color:"#86868b",fontWeight:500,fontSize:"0.8rem",mb:.5,display:"block"},children:"Zawód"}),e.jsx(b,{variant:"body1",sx:{fontWeight:600,color:"#1d1d1f",fontSize:"1.1rem"},children:s.occupation})]})]})})]})})]})}),e.jsxs(Ce,{value:F,index:1,children:[e.jsxs(p,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(g,{variant:"contained",startIcon:e.jsx(ve,{}),onClick:()=>t(`/patients/${r}/consultations/new`),sx:{bgcolor:"#007AFF",color:"white",textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:"none","&:hover":{bgcolor:"#0051D5",boxShadow:"none"}},children:"Nowa konsultacja"}),e.jsx(g,{variant:y.consultations?"contained":"outlined",startIcon:e.jsx(eo,{}),onClick:()=>{be(o=>({...o,consultations:!o.consultations}))},sx:{borderColor:"#d2d2d7",color:y.consultations?"white":"#1d1d1f",bgcolor:y.consultations?"#007AFF":"transparent",textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:"none","&:hover":{borderColor:"#1d1d1f",bgcolor:y.consultations?"#0051D5":m("#000",.02),boxShadow:"none"}},children:y.consultations?"Pokaż aktywne":"Pokaż zarchiwizowane"})]}),D.length===0?e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsx(zo,{sx:{fontSize:64,color:"#d2d2d7",mb:2}}),e.jsx(b,{variant:"h6",sx:{color:"#86868b",fontWeight:500},children:"Brak konsultacji"})]}):e.jsx(Q,{spacing:3,children:D.map(o=>e.jsx(de,{elevation:0,sx:{p:3,borderRadius:2,border:"1px solid",borderColor:"divider",transition:"all 0.2s","&:hover":{borderColor:"#007AFF",transform:"translateY(-2px)"}},children:e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:2},children:[e.jsxs(p,{sx:{flex:1},children:[e.jsx(b,{variant:"h6",sx:{fontWeight:700,color:"#1d1d1f",mb:1,fontSize:"1.15rem"},children:new Date(o.consultationDate).toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"})}),o.diagnosis&&e.jsx(b,{variant:"body2",sx:{color:"#86868b",fontSize:"0.95rem",lineHeight:1.6},children:o.diagnosis})]}),e.jsxs(Q,{direction:"row",spacing:1,children:[e.jsx(g,{size:"small",variant:"outlined",onClick:()=>t(`/consultations/${o.id}`),sx:{borderColor:"#d2d2d7",color:"#1d1d1f",textTransform:"none",fontWeight:600,borderRadius:1.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"Zobacz"}),s.email&&e.jsx(g,{size:"small",variant:"contained",startIcon:e.jsx(Re,{}),onClick:()=>Te("consultation",o.id,"Konsultacja"),disabled:C,sx:{bgcolor:"#007AFF",color:"white",textTransform:"none",fontWeight:600,borderRadius:1.5,boxShadow:"none","&:hover":{bgcolor:"#0051D5",boxShadow:"none"}},children:"Wyślij"}),y.consultations?e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:"small",onClick:()=>Pe("consultation",o.id,"Konsultacja"),sx:{color:"#34C759"},children:e.jsx(oo,{})}),e.jsx(Y,{size:"small",onClick:()=>Fe("consultation",o.id,"Konsultacja"),sx:{color:"#FF3B30"},children:e.jsx(to,{})})]}):e.jsx(Y,{size:"small",onClick:()=>V("consultation",o.id,"Konsultacja"),sx:{color:"#FF3B30"},children:e.jsx(Be,{})})]})]})},o.id))})]}),e.jsxs(Ce,{value:F,index:2,children:[e.jsxs(p,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(g,{variant:"contained",startIcon:e.jsx(ve,{}),onClick:()=>t(`/patients/${r}/lab-results/new`),sx:{bgcolor:"#007AFF",color:"white",textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:"none","&:hover":{bgcolor:"#0051D5",boxShadow:"none"}},children:"Nowy wynik badania"}),e.jsx(g,{variant:y.labResults?"contained":"outlined",startIcon:e.jsx(eo,{}),onClick:()=>{be(o=>({...o,labResults:!o.labResults}))},sx:{borderColor:"#d2d2d7",color:y.labResults?"white":"#1d1d1f",bgcolor:y.labResults?"#007AFF":"transparent",textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:"none","&:hover":{borderColor:"#1d1d1f",bgcolor:y.labResults?"#0051D5":m("#000",.02),boxShadow:"none"}},children:y.labResults?"Pokaż aktywne":"Pokaż zarchiwizowane"})]}),N.length===0?e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsx(wo,{sx:{fontSize:64,color:"#d2d2d7",mb:2}}),e.jsx(b,{variant:"h6",sx:{color:"#86868b",fontWeight:500},children:"Brak wyników badań"})]}):e.jsx(Q,{spacing:2,children:N.map(o=>e.jsx(de,{elevation:0,sx:{p:3,borderRadius:2,border:"1px solid",borderColor:"divider",transition:"all 0.2s","&:hover":{borderColor:"#34C759",transform:"translateY(-2px)"}},children:e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:2},children:[e.jsxs(p,{sx:{flex:1,cursor:"pointer"},onClick:()=>t(`/patients/${r}/lab-results/${o.id}`),children:[e.jsx(b,{variant:"h6",sx:{fontWeight:700,color:"#1d1d1f",mb:1,fontSize:"1.15rem"},children:o.testName||"Wynik badania"}),e.jsx(b,{variant:"body2",sx:{color:"#86868b",fontSize:"0.95rem"},children:new Date(o.date||o.testDate).toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs(Q,{direction:"row",spacing:1,children:[e.jsx(g,{size:"small",variant:"outlined",startIcon:e.jsx(Fo,{}),onClick:()=>t(`/patients/${r}/lab-results/${o.id}`),sx:{borderColor:"#d2d2d7",color:"#1d1d1f",textTransform:"none",fontWeight:600,borderRadius:1.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"Zobacz"}),e.jsx(g,{size:"small",variant:"outlined",startIcon:e.jsx(Ye,{}),onClick:()=>t(`/patients/${r}/lab-results/${o.id}/edit`),sx:{borderColor:"#d2d2d7",color:"#1d1d1f",textTransform:"none",fontWeight:600,borderRadius:1.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"Edytuj"}),e.jsx(g,{size:"small",variant:"outlined",startIcon:e.jsx(To,{}),onClick:async()=>{var n,c;try{const v=await z.get(`/lab-results/${o.id}/pdf`,{responseType:"blob"}),R=window.URL.createObjectURL(new Blob([v.data])),S=document.createElement("a");S.href=R,S.setAttribute("download",`wynik-badan-${o.id}.pdf`),document.body.appendChild(S),S.click(),S.remove(),window.URL.revokeObjectURL(R),d("PDF pobrany pomyślnie")}catch(v){x(((c=(n=v.response)==null?void 0:n.data)==null?void 0:c.error)||"Błąd pobierania PDF")}},sx:{borderColor:"#d2d2d7",color:"#1d1d1f",textTransform:"none",fontWeight:600,borderRadius:1.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"PDF"}),s.email&&e.jsx(g,{size:"small",variant:"contained",startIcon:e.jsx(Re,{}),onClick:()=>Te("labResult",o.id,"Wynik badania"),disabled:C,sx:{bgcolor:"#007AFF",color:"white",textTransform:"none",fontWeight:600,borderRadius:1.5,boxShadow:"none","&:hover":{bgcolor:"#0051D5",boxShadow:"none"}},children:"Wyślij"}),y.labResults?e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:"small",onClick:()=>Pe("labResult",o.id,"Wynik badania"),sx:{color:"#34C759"},children:e.jsx(oo,{})}),e.jsx(Y,{size:"small",onClick:()=>Fe("labResult",o.id,"Wynik badania"),sx:{color:"#FF3B30"},children:e.jsx(to,{})})]}):e.jsx(Y,{size:"small",onClick:()=>V("labResult",o.id,"Wynik badania"),sx:{color:"#FF3B30"},children:e.jsx(Be,{})})]})]})},o.id))})]}),e.jsxs(Ce,{value:F,index:3,children:[e.jsx(p,{sx:{mb:3},children:e.jsx(g,{variant:"contained",startIcon:e.jsx(ve,{}),onClick:()=>t(`/patients/${r}/scalp-photos/new`),sx:{bgcolor:"#007AFF",color:"white",textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:"none","&:hover":{bgcolor:"#0051D5",boxShadow:"none"}},children:"Dodaj zdjęcie"})}),O.length===0?e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsx(so,{sx:{fontSize:64,color:"#d2d2d7",mb:2}}),e.jsx(b,{variant:"h6",sx:{color:"#86868b",fontWeight:500},children:"Brak zdjęć"})]}):e.jsx(J,{container:!0,spacing:2,children:O.map(o=>e.jsx(J,{size:{xs:12,sm:6,md:4},children:e.jsxs(de,{elevation:0,sx:{borderRadius:3,overflow:"hidden",border:"1px solid",borderColor:"divider",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderColor:"#FF9500",transform:"translateY(-4px)",boxShadow:"0 12px 30px rgba(0,0,0,0.08)"}},children:[e.jsx(p,{onClick:()=>t(`/scalp-photos/${o.id}`),sx:{width:"100%",height:200,bgcolor:"#f5f5f7",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",overflow:"hidden"},children:o.url||o.filePath?e.jsx("img",{src:o.url||(o.filePath?`/uploads/${o.filePath.split(/[/\\]/).pop()}`:""),alt:"Zdjęcie skóry głowy",style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.5s ease"},onMouseEnter:n=>n.currentTarget.style.transform="scale(1.05)",onMouseLeave:n=>n.currentTarget.style.transform="scale(1)",onError:n=>{const c=n.target;console.error("Błąd ładowania obrazu:",{src:c.src,photoUrl:o.url,filePath:o.filePath}),c.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect fill="%23ddd" width="200" height="200"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="14" dy="10.5" font-weight="bold" x="50%25" y="50%25" text-anchor="middle"%3EBrak zdj%26%23381%3Bcia%3C/text%3E%3C/svg%3E'}}):e.jsx(so,{sx:{fontSize:48,color:"#d2d2d7"}})}),e.jsxs(p,{sx:{p:2},children:[e.jsxs(b,{variant:"body2",sx:{color:"#86868b",mb:1.5,fontWeight:700,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Wo,{sx:{fontSize:14}}),(()=>{const n=o.date||o.createdAt||o.photoDate;return n?new Date(n).toLocaleDateString("pl-PL"):"Brak daty"})()]}),e.jsxs(Q,{direction:"row",spacing:1,children:[e.jsx(g,{size:"small",variant:"outlined",fullWidth:!0,onClick:()=>t(`/scalp-photos/${o.id}`),sx:{borderColor:"#d2d2d7",color:"#1d1d1f",textTransform:"none",fontWeight:700,borderRadius:1.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"Zobacz"}),e.jsx(Y,{size:"small",onClick:()=>V("scalpPhoto",o.id,"Zdjęcie"),sx:{color:"#FF3B30",bgcolor:m("#FF3B30",.05),"&:hover":{bgcolor:m("#FF3B30",.1)}},children:e.jsx(Be,{})})]})]})]})},o.id))})]}),e.jsxs(Ce,{value:F,index:4,children:[e.jsxs(p,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(g,{variant:"contained",startIcon:e.jsx(ve,{}),onClick:()=>t(`/patients/${r}/care-plans/new`),sx:{bgcolor:"#007AFF",color:"white",textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:"none","&:hover":{bgcolor:"#0051D5",boxShadow:"none"}},children:"Nowy plan opieki"}),e.jsx(g,{variant:y.carePlans?"contained":"outlined",startIcon:e.jsx(eo,{}),onClick:()=>{be(o=>({...o,carePlans:!o.carePlans}))},sx:{borderColor:"#d2d2d7",color:y.carePlans?"white":"#1d1d1f",bgcolor:y.carePlans?"#007AFF":"transparent",textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:"none","&:hover":{borderColor:"#1d1d1f",bgcolor:y.carePlans?"#0051D5":m("#000",.02),boxShadow:"none"}},children:y.carePlans?"Pokaż aktywne":"Pokaż zarchiwizowane"})]}),se.length===0?e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsx(Co,{sx:{fontSize:64,color:"#d2d2d7",mb:2}}),e.jsx(b,{variant:"h6",sx:{color:"#86868b",fontWeight:500},children:"Brak planów opieki"})]}):e.jsx(Q,{spacing:2,children:se.map(o=>e.jsx(de,{elevation:0,sx:{p:3,borderRadius:2,border:"1px solid",borderColor:"divider",transition:"all 0.2s","&:hover":{borderColor:"#FF3B30",transform:"translateY(-2px)"}},children:e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:2},children:[e.jsxs(p,{sx:{flex:1},children:[e.jsx(b,{variant:"h6",sx:{fontWeight:700,color:"#1d1d1f",mb:1},children:o.title||"Plan opieki"}),o.description&&e.jsx(b,{variant:"body2",sx:{color:"#86868b"},children:o.description})]}),e.jsxs(Q,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(g,{size:"small",variant:"outlined",startIcon:e.jsx(Fo,{}),onClick:()=>t(`/patients/${r}/care-plans/${o.id}`),sx:{borderColor:"#d2d2d7",color:"#1d1d1f",textTransform:"none",fontWeight:600,borderRadius:1.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"Zobacz"}),e.jsx(g,{size:"small",variant:"outlined",startIcon:e.jsx(Ye,{}),onClick:()=>t(`/patients/${r}/care-plans/${o.id}/edit`),sx:{borderColor:"#d2d2d7",color:"#1d1d1f",textTransform:"none",fontWeight:600,borderRadius:1.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"Edytuj"}),e.jsx(g,{size:"small",variant:"outlined",startIcon:e.jsx(To,{}),onClick:async()=>{var n,c;try{const v=await z.get(`/care-plans/${o.id}/pdf`,{responseType:"blob"}),R=window.URL.createObjectURL(new Blob([v.data])),S=document.createElement("a");S.href=R,S.setAttribute("download",`plan-opieki-${o.id}.pdf`),document.body.appendChild(S),S.click(),S.remove(),window.URL.revokeObjectURL(R),d("PDF pobrany pomyślnie")}catch(v){x(((c=(n=v.response)==null?void 0:n.data)==null?void 0:c.error)||"Błąd pobierania PDF")}},sx:{borderColor:"#d2d2d7",color:"#1d1d1f",textTransform:"none",fontWeight:600,borderRadius:1.5,"&:hover":{borderColor:"#1d1d1f",bgcolor:m("#000",.02)}},children:"PDF"}),s.email&&e.jsx(g,{size:"small",variant:"contained",startIcon:e.jsx(Re,{}),onClick:()=>Te("carePlan",o.id,"Plan opieki"),disabled:C,sx:{bgcolor:"#007AFF",color:"white",textTransform:"none",fontWeight:600,borderRadius:1.5,boxShadow:"none","&:hover":{bgcolor:"#0051D5",boxShadow:"none"}},children:"Wyślij"}),y.carePlans?e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:"small",onClick:()=>Pe("carePlan",o.id,"Plan opieki"),sx:{color:"#34C759"},children:e.jsx(oo,{})}),e.jsx(Y,{size:"small",onClick:()=>Fe("carePlan",o.id,"Plan opieki"),sx:{color:"#FF3B30"},children:e.jsx(to,{})})]}):e.jsx(Y,{size:"small",onClick:()=>V("carePlan",o.id,"Plan opieki"),sx:{color:"#FF3B30"},children:e.jsx(Be,{})})]})]})},o.id))})]}),e.jsxs(Ce,{value:F,index:5,children:[e.jsx(p,{sx:{mb:3},children:e.jsx(g,{variant:"contained",startIcon:e.jsx(ve,{}),onClick:Ue,sx:{bgcolor:"#AF52DE",color:"white",textTransform:"none",fontWeight:600,borderRadius:2,boxShadow:"none","&:hover":{bgcolor:"#9B30D9",boxShadow:"none"}},children:"Dodaj wizytę / zabieg"})}),pe.length===0?e.jsxs(p,{sx:{textAlign:"center",py:8},children:[e.jsx(ko,{sx:{fontSize:64,color:"#d2d2d7",mb:2}}),e.jsx(b,{variant:"h6",sx:{color:"#86868b",fontWeight:500},children:"Brak wizyt i zabiegów"})]}):e.jsx(bt,{component:de,elevation:0,sx:{border:"1px solid",borderColor:"divider",borderRadius:2},children:e.jsxs(ft,{children:[e.jsx(mt,{children:e.jsxs(Ao,{sx:{bgcolor:m("#000",.02)},children:[e.jsx(U,{sx:{fontWeight:700,color:"#1d1d1f"},children:"Data i godzina"}),e.jsx(U,{sx:{fontWeight:700,color:"#1d1d1f"},children:"Rodzaj zabiegu"}),e.jsx(U,{sx:{fontWeight:700,color:"#1d1d1f"},children:"Status"}),e.jsx(U,{sx:{fontWeight:700,color:"#1d1d1f"},children:"Seria"}),e.jsx(U,{sx:{fontWeight:700,color:"#1d1d1f"},children:"Cena"}),e.jsx(U,{sx:{fontWeight:700,color:"#1d1d1f"},children:"Notatki"}),e.jsx(U,{align:"right",sx:{fontWeight:700,color:"#1d1d1f"},children:"Akcje"})]})}),e.jsx(gt,{children:pe.map(o=>{const n=vo[o.status]||vo.ZAPLANOWANA;return e.jsxs(Ao,{hover:!0,children:[e.jsxs(U,{children:[e.jsx(b,{variant:"body2",sx:{fontWeight:600},children:new Date(o.data).toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"})}),e.jsx(b,{variant:"caption",sx:{color:"#86868b"},children:(()=>{const c=new Date(o.data),v=String(c.getUTCHours()).padStart(2,"0"),R=String(c.getUTCMinutes()).padStart(2,"0");return`${v}:${R}`})()})]}),e.jsx(U,{children:e.jsx(b,{variant:"body2",sx:{fontWeight:500},children:o.rodzajZabiegu})}),e.jsx(U,{children:e.jsx(Ro,{size:"small",sx:{minWidth:130},children:e.jsxs(Po,{value:o.status,onChange:c=>ie(o.id,c.target.value),sx:{bgcolor:n.bgColor,color:n.color,fontWeight:600,fontSize:"0.85rem","& .MuiOutlinedInput-notchedOutline":{borderColor:n.color},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:n.color}},children:[e.jsx(xe,{value:"ZAPLANOWANA",children:"Zaplanowana"}),e.jsx(xe,{value:"ODBYTA",children:"Odbyta"}),e.jsx(xe,{value:"NIEOBECNOSC",children:"Nieobecność"}),e.jsx(xe,{value:"ANULOWANA",children:"Anulowana"})]})})}),e.jsx(U,{children:o.numerWSerii&&o.liczbaSerii?e.jsx(ao,{label:`${o.numerWSerii} z ${o.liczbaSerii}`,size:"small",sx:{bgcolor:m("#007AFF",.1),color:"#007AFF",fontWeight:600}}):e.jsx(b,{variant:"body2",sx:{color:"#86868b"},children:"-"})}),e.jsx(U,{children:o.cena?e.jsxs(b,{variant:"body2",sx:{fontWeight:600,color:"#34C759"},children:[Number(o.cena).toFixed(2)," zł"]}):e.jsx(b,{variant:"body2",sx:{color:"#86868b"},children:"-"})}),e.jsx(U,{children:o.notatki?e.jsx(Bo,{title:o.notatki,arrow:!0,children:e.jsx(b,{variant:"body2",sx:{maxWidth:150,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#86868b",cursor:"pointer"},children:o.notatki})}):e.jsx(b,{variant:"body2",sx:{color:"#86868b"},children:"-"})}),e.jsx(U,{align:"right",children:e.jsxs(Q,{direction:"row",spacing:.5,justifyContent:"flex-end",children:[o.status==="ZAPLANOWANA"&&(s==null?void 0:s.email)&&e.jsx(Bo,{title:"Wyślij przypomnienie",children:e.jsx(Y,{size:"small",onClick:()=>Ze(o),sx:{color:"#FF9500"},children:e.jsx(yt,{fontSize:"small"})})}),e.jsx(Y,{size:"small",onClick:()=>q(o),sx:{color:"#007AFF"},children:e.jsx(Ye,{fontSize:"small"})}),e.jsx(Y,{size:"small",onClick:()=>V("visit",o.id,o.rodzajZabiegu),sx:{color:"#FF3B30"},children:e.jsx(Be,{fontSize:"small"})})]})})]},o.id)})})]})})]})]})]}),e.jsxs(Ie,{open:h.open,onClose:()=>A({...h,open:!1}),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsx(De,{sx:{fontWeight:700,color:"#1d1d1f"},children:h.mode==="edit"?"Edytuj wizytę / zabieg":"Dodaj nową wizytę / zabieg"}),e.jsx(Ee,{children:e.jsxs(Q,{spacing:3,sx:{mt:1},children:[e.jsx(ue,{label:"Data i godzina wizyty",type:"datetime-local",value:h.data,onChange:o=>A({...h,data:o.target.value}),fullWidth:!0,required:!0,InputLabelProps:{shrink:!0}}),e.jsx(ue,{label:"Rodzaj zabiegu",value:h.rodzajZabiegu,onChange:o=>A({...h,rodzajZabiegu:o.target.value}),fullWidth:!0,required:!0,placeholder:"np. Mezoterapia, PRP, Konsultacja kontrolna"}),e.jsxs(Ro,{fullWidth:!0,children:[e.jsx(jt,{children:"Status"}),e.jsxs(Po,{value:h.status,label:"Status",onChange:o=>A({...h,status:o.target.value}),children:[e.jsx(xe,{value:"ZAPLANOWANA",children:"Zaplanowana"}),e.jsx(xe,{value:"ODBYTA",children:"Odbyta"}),e.jsx(xe,{value:"NIEOBECNOSC",children:"Nieobecność"}),e.jsx(xe,{value:"ANULOWANA",children:"Anulowana"})]})]}),e.jsx(ue,{label:"Cena (PLN)",type:"number",value:h.cena,onChange:o=>A({...h,cena:o.target.value}),fullWidth:!0,InputProps:{startAdornment:e.jsx(wt,{position:"start",children:"PLN"})}}),e.jsxs(p,{sx:{display:"flex",gap:2},children:[e.jsx(ue,{label:"Numer w serii",type:"number",value:h.numerWSerii,onChange:o=>A({...h,numerWSerii:o.target.value}),fullWidth:!0,placeholder:"np. 3"}),e.jsx(ue,{label:"Liczba zabiegów w serii",type:"number",value:h.liczbaSerii,onChange:o=>A({...h,liczbaSerii:o.target.value}),fullWidth:!0,placeholder:"np. 6"})]}),h.numerWSerii&&h.liczbaSerii&&e.jsxs(no,{severity:"info",sx:{borderRadius:2},children:["Zabieg ",h.numerWSerii," z ",h.liczbaSerii]}),e.jsx(ue,{label:"Notatki",value:h.notatki,onChange:o=>A({...h,notatki:o.target.value}),fullWidth:!0,multiline:!0,rows:3})]})}),e.jsxs($e,{sx:{p:2},children:[e.jsx(g,{onClick:()=>A({...h,open:!1}),sx:{color:"#1d1d1f",textTransform:"none",fontWeight:600},children:"Anuluj"}),e.jsx(g,{onClick:ne,variant:"contained",sx:{bgcolor:"#AF52DE",color:"white",textTransform:"none",fontWeight:600,boxShadow:"none","&:hover":{bgcolor:"#9B30D9",boxShadow:"none"}},children:h.mode==="edit"?"Zapisz zmiany":"Dodaj wizytę"})]})]}),e.jsxs(Ie,{open:I.open,onClose:We,PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsx(De,{sx:{fontWeight:700,color:"#1d1d1f"},children:"Potwierdź usunięcie"}),e.jsx(Ee,{children:e.jsxs(lo,{sx:{color:"#86868b"},children:["Czy na pewno chcesz usunąć: ",I.name,"?"]})}),e.jsxs($e,{sx:{p:2},children:[e.jsx(g,{onClick:We,sx:{color:"#1d1d1f",textTransform:"none",fontWeight:600},children:"Anuluj"}),e.jsx(g,{onClick:Le,variant:"contained",sx:{bgcolor:"#FF3B30",color:"white",textTransform:"none",fontWeight:600,boxShadow:"none","&:hover":{bgcolor:"#D70015",boxShadow:"none"}},children:"Usuń"})]})]}),e.jsxs(Ie,{open:T.open,onClose:()=>$({open:!1,type:null,id:null,name:""}),PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsx(De,{sx:{fontWeight:700,color:"#1d1d1f"},children:"Potwierdź przywrócenie"}),e.jsx(Ee,{children:e.jsxs(lo,{sx:{color:"#86868b"},children:["Czy na pewno chcesz przywrócić: ",T.name,"?"]})}),e.jsxs($e,{sx:{p:2},children:[e.jsx(g,{onClick:()=>$({open:!1,type:null,id:null,name:""}),sx:{color:"#1d1d1f",textTransform:"none",fontWeight:600},children:"Anuluj"}),e.jsx(g,{onClick:Ne,variant:"contained",sx:{bgcolor:"#34C759",color:"white",textTransform:"none",fontWeight:600,boxShadow:"none","&:hover":{bgcolor:"#248A3D",boxShadow:"none"}},children:"Przywróć"})]})]}),e.jsxs(Ie,{open:Z.open,onClose:()=>te({open:!1,type:null,id:null,name:""}),PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsx(De,{sx:{fontWeight:700,color:"#FF3B30"},children:"Trwałe usunięcie"}),e.jsx(Ee,{children:e.jsxs(lo,{sx:{color:"#86868b"},children:["UWAGA: Ta operacja jest nieodwracalna. Czy na pewno chcesz trwale usunąć: ",Z.name,"?"]})}),e.jsxs($e,{sx:{p:2},children:[e.jsx(g,{onClick:()=>te({open:!1,type:null,id:null,name:""}),sx:{color:"#1d1d1f",textTransform:"none",fontWeight:600},children:"Anuluj"}),e.jsx(g,{onClick:Oe,variant:"contained",sx:{bgcolor:"#FF3B30",color:"white",textTransform:"none",fontWeight:600,boxShadow:"none","&:hover":{bgcolor:"#D70015",boxShadow:"none"}},children:"Usuń trwale"})]})]}),e.jsxs(Ie,{open:k.open,onClose:()=>E({...k,open:!1}),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsx(De,{sx:{fontWeight:600,pb:2},children:"Wyślij przypomnienie o wizycie"}),e.jsxs(Ee,{children:[e.jsxs(p,{sx:{mb:2},children:[e.jsx(b,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Wizyta:"}),e.jsx(b,{variant:"h6",sx:{fontWeight:600,mb:1},children:k.rodzajZabiegu}),e.jsx(b,{variant:"body2",color:"text.secondary",children:k.visitData?new Date(k.visitData).toLocaleString("pl-PL",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):""})]}),e.jsx(ue,{fullWidth:!0,label:"Adres email odbiorcy",type:"email",value:k.recipientEmail,onChange:o=>E({...k,recipientEmail:o.target.value}),required:!0,sx:{mb:2},helperText:!(s!=null&&s.email)&&"Pacjent nie ma zapisanego adresu email"}),e.jsx(ue,{fullWidth:!0,label:"Dodatkowa wiadomość (opcjonalnie)",multiline:!0,rows:4,value:k.customMessage,onChange:o=>E({...k,customMessage:o.target.value}),placeholder:"Dodaj dodatkową wiadomość do przypomnienia...",sx:{mb:2}}),e.jsx(no,{severity:"info",sx:{mt:2},children:"Pacjent otrzyma email z przypomnieniem oraz możliwością zapisania wizyty do kalendarza (Google Calendar, Outlook, lub plik .ics)."})]}),e.jsxs($e,{sx:{p:2,pt:1},children:[e.jsx(g,{onClick:()=>E({...k,open:!1}),disabled:le,children:"Anuluj"}),e.jsx(g,{onClick:_e,variant:"contained",startIcon:le?e.jsx(yo,{size:20}):e.jsx(St,{}),disabled:le||!k.recipientEmail,sx:{bgcolor:"#FF9500","&:hover":{bgcolor:"#E68900"}},children:le?"Wysyłanie...":"Wyślij przypomnienie"})]})]})]})}export{Cr as default};
